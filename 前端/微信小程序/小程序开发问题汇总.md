[TOC]

### 0. å¾®ä¿¡å°ç¨‹åºçš„å¼‚æ­¥/åŒæ­¥é—®é¢˜

â€‹	**æ”¾åœ¨æœ€å‰**

â€‹	å°ç¨‹åºç”±äºå¾ˆå¤šæ“ä½œéƒ½è¦ç­‰å¾…ï¼Œåœ¨ç­‰å¾…å›¾ä¸­æ‰€æœ‰æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä¹Ÿå°±æ˜¯åé¢çš„ä»£ç å†…å®¹å¦‚æœéœ€è¦è¿™ä¸ªç­‰å¾…ä¹‹åäº§ç”Ÿçš„æ•°æ®ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½ä¸èƒ½æ‹¿åˆ°ã€‚æ¯”å¦‚`wx.request`å»è·å¾—æ•°æ®ï¼Œéœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½è·å–æˆåŠŸã€‚æ¯”å¦‚ä¸‹é¢ï¼š

```js
data: {
  res: 'default',
}
wx.request({
  ... //çœç•¥
  success(res){
  	// res = 'success';
		this.setData({
  		res = res;	
		})
	}
})
console.log(this.data.res); // è¿™é‡Œå¯èƒ½logå‡ºæ¥çš„æ˜¯default
```

â€‹	å› æ­¤ç‰¹åˆ«éœ€è¦æ³¨æ„å¾®ä¿¡å°ç¨‹åºçš„å¼‚æ­¥é—®é¢˜ã€‚æœ‰é—®é¢˜çš„æ—¶å€™å¤šæƒ³æƒ³æ˜¯å¦æœ‰å¼‚æ­¥æƒ…å†µã€‚

****

### 1. `exports` & `module.exports`

[module.exportså’Œexportsçš„åŒºåˆ«](https://www.jianshu.com/p/beafd9ac9656)

â€‹	ä½¿ç”¨`exports` / `module.exports`çš„æ—¶å€™éœ€è¦åˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥å¯¼å‡º``module.exports.function = functionName`ï¼Œç¬¬äºŒæ­¥å¼•å…¥`var objectName = require('fileName.js')`ã€‚

```js
// common.js
function sayHello(name) {
  console.log(`Hello ${name} !`)
}
function sayGoodbye(name) {
  console.log(`Goodbye ${name} !`)
}

module.exports.sayHello = sayHello
exports.sayGoodbye = sayGoodbye
```

```javascript
// another.js
var common = require('common.js')
Page({
  helloMINA: function() {
    common.sayHello('MINA')
  },
  goodbyeMINA: function() {
    common.sayGoodbye('MINA')
  }
})
```

â€‹	æŒ‰ç…§[module.exportså’Œexportsçš„åŒºåˆ«](https://www.jianshu.com/p/beafd9ac9656)æåˆ°ï¼š

> **`require`å¼•å…¥çš„å¯¹è±¡æœ¬è´¨ä¸Šæ˜¯`module.exports`**ã€‚è¿™å°±äº§ç”Ÿäº†ä¸€ä¸ªé—®é¢˜ï¼Œå½“ `module.exports`å’Œ`exports`æŒ‡å‘çš„ä¸æ˜¯åŒä¸€å—å†…å­˜æ—¶ï¼Œ`exports`çš„å†…å®¹å°±ä¼šå¤±æ•ˆã€‚
>
> ```cpp
> // moduleé‡Œé¢æœ‰exportså±æ€§
> console.log(exports);//è¾“å‡ºï¼š{}
> console.log(module);//è¾“å‡ºï¼šModule {..., exports: {}, ...} ï¼ˆæ³¨ï¼š...ä»£è¡¨çœç•¥äº†å…¶ä»–ä¸€äº›å±æ€§ï¼‰
> ```
>
> ```java
> //people.js
> module.exports = {name: 'è¤ç«è™«å”å”'}ï¼›
> exports = {name: 'è¤ç«è™«è€é˜¿å§¨'};
> ```
>
> ```jsx
> //main.js
> let people = require('./people');
> console.log(people);//è¾“å‡ºï¼š{name: 'è¤ç«è™«å”å”'}
> ```
>
> - [ ] è¿™é‡Œæœ‰è¯„è®ºè¯´ï¼š`exports = {name: 'è¤ç«è™«è€é˜¿å§¨'}; ä¸èƒ½è¿™ä¹ˆèµ‹å€¼ï¼Œé€šè¿‡requireå¾—åˆ°çš„æ°¸è¿œæ˜¯{}ï¼Œexportsåªèƒ½é€šè¿‡æ‰“ç‚¹å±æ€§èµ‹å€¼å¯¼å‡º`ã€‚åæœŸå­¦ä¹ node.jsçš„æ—¶å€™å†æ·±å…¥åœ°äº†è§£ä¸€ä¸‹ã€‚ç°åœ¨å…ˆå¼ºè°ƒä¸€ä¸‹ï¼šä½¿ç”¨`module.exports`è€Œä¸è¦ä½¿ç”¨`exports`ã€‚

****

### 2. buttonæ€ä¹ˆç»‘å®šäº‹ä»¶

`bindtap`

****

### 3. æ•°æ®çš„ç»‘å®š

â€‹	æ³¨æ„åœ¨æ“ä½œ`data: {}`çš„æ•°æ®çš„æ—¶å€™ï¼Œæœ‰ä¸¤ä¸ªæ–¹å¼ã€‚

> `this.setData()`
>
> ```js
> // this.setData()æ„æ€å°±æ˜¯å¯¹dataé‡Œé¢çš„æ•°æ®è¿›è¡Œæ“ä½œ
> Page({
>   data: {
>     boolean1: false,
>     boolean2: true
>   },
>  
>   changeBoolean() {
>     this.setData({
>       boolean1: true,
>       boolean2: false
>      })
>   } 
> })
> ```
>
> `this.data.sth`
>
> ```js
> Page({
>   data: {
>     boolean1: false,
>     boolean2: true
>   },
>  
>   changeBoolean() {
>     //æ³¨æ„ä¸èƒ½ç›´æ¥ä½¿ç”¨this.boolean1 / this.boolean2
>     this.data.boolean1=true;
>     this.data.boolean2=false;
> })
> ```

****

### 4. è‡ªå®šä¹‰navigationBar

[å¾®ä¿¡å°ç¨‹åºè‡ªå®šä¹‰navigationBar](https://www.jianshu.com/p/9822d9ee168e)

[navigationBarTitle](https://developers.weixin.qq.com/miniprogram/dev/api/ui/navigation-bar/wx.setNavigationBarTitle.html)

```js
// æ ¹æ®è¯¥æ¥å£ï¼Œandriodçš„æ–‡å­—é»˜è®¤å·¦ä¾§å¯¹é½ï¼Œè‹¹æœæ–‡å­—é»˜è®¤å±…ä¸­ï¼Œå¦‚æœæƒ³è¦éƒ½å±…ä¸­ï¼Œéœ€è¦è‡ªå®šä¹‰navigationBar
onLoad: function (options) {
    wx.setNavigationBarTitle({
      title: "æŸ¥éªŒ"
    });
  },
```

1.è‡ªå®šä¹‰éœ€è¦åˆ©ç”¨ä¸¤ä¸ªæ¥å£ï¼š`wx.getMenuButtonBoundingClientRect()`ä»¥åŠ`wx.getSystemInfo()`ã€‚

2.éœ€è¦ç†è§£æ¥å£è¿”å›çš„å‚æ•°å«ä¹‰ã€‚	

â€‹	1.å…³äº`wx.getSystemInfo()`çš„å„ä¸ªå‚æ•°ã€‚

> <img src="./images/wx.getSystemInfo.png" alt="image-20201220120028733" style="zoom:40%;" />
>
> ä»å‚æ•°æ‰€ä»£è¡¨åŸŸä»å¤§åˆ°å°è¿›è¡Œè§£é‡Šï¼š
>
> 1.`screen` = `safeArea` + `statusBar` = `window` (+ `åŸç”ŸnavBar`) (+ `åŸç”ŸtabBar`)
>
> 2.`safeArea` ã€ `statusBar`
>
> 3.`window` ã€`åŸç”ŸnavBar` ã€ `åŸç”ŸtabBar`ï¼ˆåŒºåˆ†`è‡ªå®šä¹‰navBar`ã€`è‡ªå®šä¹‰tabBar`ï¼‰
>
> å¯¹ä¸Šé¢ä¸‰ä¸ªå±‚æ¬¡ä¸€ä¸€è§£é‡Šï¼š
>
> 1.`screen` å±å¹•ï¼šæ•´ä¸ªå±å¹•çš„é«˜åº¦
>
> 2.1`statusBar` çŠ¶æ€æ ï¼šçŠ¶æ€æ æŒ‡çš„æ˜¯åˆ˜æµ·ï¼Œå³æ˜¾ç¤ºæ—¶é—´ã€ç”µé‡ã€ä¿¡å·çš„é‚£ä¸ªåŒºåŸŸã€‚
>
> 2.2`safeArea` å®‰å…¨åŒºåŸŸï¼šæŒ‡çš„æ˜¯é™¤å»çŠ¶æ€æ çš„éƒ¨åˆ†ï¼Œé»˜è®¤é™¤å»çŠ¶æ€æ ï¼Œå¯¹å…¶ä»–éƒ¨åˆ†è¿›è¡Œæ“ä½œéƒ½æ˜¯å®‰å…¨çš„ã€‚ï¼ˆè§ä¸Šé¢çš„**é»‘è‰²çº¿æ¡å›´æˆåŒºåŸŸ**ï¼‰
>
> 3.1`window`ï¼šé’ˆå¯¹æ•´ä¸ªå±å¹•`screen`è€Œè¨€ï¼Œé™¤å»æ‰€æœ‰åŸç”Ÿç»„ä»¶åå‰©ä¸‹çš„åŒºåŸŸã€‚é’ˆå¯¹`window`å¿…é¡»è¦è¿›è¡Œè¯¦ç»†çš„è®¤è¯†ï¼Œæ¯”å¦‚è¯´ä¸Šé¢çš„å›¾ç‰‡ï¼Œè‡ªå®šä¹‰äº†`navBar`ï¼ˆè‡ªå®šä¹‰navBarç›¸å½“äºèˆå¼ƒäº†`åŸç”Ÿçš„statusBarä»¥åŠnavBar`å†…å®¹ï¼‰ï¼Œä»¥åŠä½¿ç”¨`åŸç”ŸtabBar`ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„`window`å°±æ˜¯`screen - åŸç”ŸtabBar`ã€‚å¦‚æœæ²¡æœ‰`è‡ªå®šä¹‰navBar`ï¼Œé‚£ä¹ˆ`window`çš„é»˜è®¤å†…å®¹å°±æ˜¯å¤¹åœ¨`åŸç”ŸnavBar`ä»¥åŠ`åŸç”ŸtabBar`ä¹‹é—´çš„åŒºåŸŸã€‚
>
> 3.2`åŸç”ŸtabBar`ï¼šé€šè¿‡åœ¨`app.json`é‡ŒæŒ‡å®š`"tabBar": {}`ç›´æ¥ç”ŸæˆåŸç”ŸtabBarã€‚
>
> 3.3`åŸç”ŸnavBar`ï¼šé€šè¿‡æä¾›çš„æ¥å£å¦‚`wx.setNavigationBarTitle({ title: "newTitle",})`å³å¯æ“ä½œä¸€äº›å†…å®¹ï¼Œä½†æ“ä½œååˆ†æœ‰é™ï¼Œå› æ­¤å¾ˆå¤šæ—¶å€™éœ€è¦`è‡ªå®šä¹‰navBar`ã€‚

â€‹	2.å…³äº`wx.getMenuButtonBoundingClientRect()`

> <img src="./images/wx.getMenuButtonBoundingCloentRect.png" alt="image-20201220123633640a" style="zoom:60%;" align="left"/>
>
> è¿”å›äº†èƒ¶å›Šçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬`top`(èƒ¶å›Šé¡¶éƒ¨çš„åæ ‡), `right`, `bottom`, `left`ï¼Œä»¥åŠå…¶å®½åº¦`width`é«˜åº¦`height`ã€‚
>
> <img src="./images/navGap.png" alt="image-20201220124410944" style="zoom:40%;" align="left"/>
>
> å¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šèƒ¶å›Š`capsule`çš„ä½ç½®å±…ä¸­äº`navBar`ï¼Œå› æ­¤åœ¨èƒ¶å›Šå’Œ`navBar`çš„`border`ä¸Šä¸‹ä¾§è¿˜æœ‰`gap`ã€‚å› æ­¤å¦‚æœéœ€è¦`è‡ªå®šä¹‰navBar`çš„è¯ï¼Œå°±éœ€è¦è®¡ç®—è¿™ä¸ª`gapHeight = capsule.top - statusBarHeight`ï¼Œå› æ­¤å°±èƒ½ç®—å‡ºï¼š
>
> `navBarHeight = capsule.height + gapHeight*2`
>
> åœ¨å¾—å‡ºäº†è‡ªå®šä¹‰`navBar`ä¹‹åï¼Œç”±äºåç»­ä½¿ç”¨çš„æ–¹ä¾¿ï¼Œä¸€èˆ¬å°†`navTotal`å­˜èµ·æ¥ï¼Œå…¶ä»£è¡¨`statusBar`å’Œ`navBar`çš„é«˜åº¦ä¹‹å’Œï¼Œå› ä¸ºåç»­æ·»åŠ å…ƒç´ éƒ½ä¼šåœ¨è¿™ä¸¤ä¸ªå…ƒç´ ä¸‹é¢ã€‚
>
> `navTotalHeight = navBarHeight + statusBarHeight`



****

### 5. globalæ•°æ®çš„ä½¿ç”¨

```js
// app.js
App({
  globalData: {
    userInfo: null
  }
})
```

```js
// index.js
const app = getApp();

Page({
  getUserInfo(e) {
    app.globalData.userInfo = e.detail.userInfo;
  }
})
```

****

### 6. urlæ€ä¹ˆé€šè¿‡è·¯ç”±ç®¡ç†

åœ¨æ¨¡å—åŒ–äº†ä¸€ä¸ªå‡½æ•°ä¹‹åï¼Œå¹¶ä¸çŸ¥é“å‡½æ•°çš„è°ƒç”¨å…·ä½“åœ¨å“ªé‡Œ

æ¯”å¦‚`pages`å’Œ`utils`æ˜¯åŒçº§çš„æ–‡ä»¶å¤¹

```js
// æ¨¡å—åŒ–å‡½æ•°çš„ä½ç½®
// utils/showLoginNeededModal/showLoginNeededModal.js
module.exports = funtion() {
	wx.navigateTo({
		url: 'path', //è¿™é‡Œçš„pathè¦æ ¹æ®å…·ä½“è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™æŒ‡å®š
	})
}
```

```js
// è°ƒç”¨å‡½æ•°åœ¨pages/certBlock/cerBlock.js
// navigateToçš„pathåœ¨ pages/loginPage/loginPage.js
// é‚£ä¹ˆæŒ‡å®šçš„pathä¸ºï¼š
path: "../loginPage/loginPage" //loginPage.jsä¸€èˆ¬çœç•¥.js
```

æ‰€ä»¥è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°ç±»ä¼¼vue2ä¸­çš„è·¯ç”±ç®¡ç†`@/pages/loginPage/loginPage`è¿™æ ·çš„æ–¹å¼ã€‚

- [ ] å¾®ä¿¡å°ç¨‹åºæ˜¯å¦æœ‰è¿™æ ·çš„ç®¡ç†æ–¹å¼ï¼Ÿ

****

### 7. å‘é€è¯·æ±‚ï¼špromiseç®¡ç†åŒæ­¥

[promise resolve()çš„ç”¨æ³•](https://www.jianshu.com/p/5b0b89bf4664)

****

### 8. showToastå’ŒhideToast

`wx.showToast`ä¼šé»˜è®¤å…³é—­ï¼Œé»˜è®¤å€¼`duration: 1500`ï¼Œå³1.5sã€‚å¯ä»¥é€šè¿‡è®¾ç½®`duration: expect_time`æ¥æ”¹å˜å¼¹çª—çš„æŒç»­æ—¶é—´ï¼Œé‚£ä¹ˆhideToastçš„å­˜åœ¨åˆæœ‰ä»€ä¹ˆç”¨ï¼Ÿ

å‚è€ƒï¼š[wx.showToast åº”ä¸ wx.hideToast é…å¯¹ä½¿ç”¨ï¼Ÿ](https://developers.weixin.qq.com/community/develop/doc/0002226de6ce50b37f1b5c64351400)

> hideToastçš„æ„ä¹‰ï¼Œåº”è¯¥æ˜¯ä½ è®¾ç½®äº†durationä¸º0çš„æ—¶å€™ï¼Œå¿…é¡»ç­‰éƒ¨åˆ†æ“ä½œå®Œæˆåï¼Œå†è°ƒç”¨hideToastæ‰‹åŠ¨å…³é—­ã€‚

****

### 9.`arr.unshift` & `arr.push`

`unshift`æ˜¯jsé‡Œé¢çš„ä¸€ä¸ªæ–¹æ³•ï¼Œèƒ½å¤Ÿåƒæ•°ç»„çš„**å¼€å¤´**æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦ã€‚

`push`åˆ™æ˜¯åœ¨æ•°ç»„æœ«å°¾æ·»åŠ å…ƒç´ ã€‚

```js
add() {
  let temp1 = [''];
  temp1.unshift('1'); //temp1: ['1', ''];
  let temp2 = [''];
  temp2.push('1'); //temp2: ['', '1'];
}
```

****

### 10. localStorageæœ¬åœ°å­˜å‚¨(&cookie)

[å¾®ä¿¡å°ç¨‹åºä»å…¥é—¨åˆ°ç²¾é€šï¼ˆäºŒï¼‰ å°ç¨‹åºçš„èƒ½åŠ›](https://blog.csdn.net/wlwlwlwl015/article/details/79125921)

[æ·±å…¥ç†è§£cookie](https://www.jianshu.com/p/6fc9cea6daa2)

â€‹		æ—©æœŸçš„ç§»åŠ¨webå¼€å‘ä¸­æœ¬åœ°å­˜å‚¨åªèƒ½ç”¨**cookie**çš„æ–¹å¼è§£å†³ï¼Œä½†æ˜¯cookieå¤§å°é™åˆ¶åœ¨**4K**ï¼Œè€Œä¸”æŸäº›æµè§ˆå™¨è¿˜å­˜åœ¨cookieä¸ªæ•°é™åˆ¶ï¼Œè€Œåéšç€H5çš„å‘å±•æœ¬åœ°å­˜å‚¨å¯ä»¥é€šè¿‡**localStorage**è¿™ä¸ªä¸œä¸œè§£å†³ï¼Œä½†ä¹Ÿä»…æ˜¯IE8ä»¥åæ‰èƒ½æ”¯æŒï¼Œå¤§å°æœ‰**5M**ï¼Œè¿™å°±è§£å†³äº†å¾ˆå¤§ä¸€éƒ¨åˆ†çš„å­˜å‚¨å®¹é‡é—®é¢˜ã€‚

â€‹		å¾®ä¿¡å°ç¨‹åºçš„å®˜æ–¹æ–‡æ¡£ä¸­è¯´äº†ï¼šåŒä¸€ä¸ªå¾®ä¿¡ç”¨æˆ·ï¼ŒåŒä¸€ä¸ªå°ç¨‹åº storage ä¸Šé™ä¸º 10MBã€‚

> ```js
> // å±•ç¤ºæœ¬åœ°å­˜å‚¨èƒ½åŠ›
> // å¦‚æœæ˜¯é¦–æ¬¡å¯åŠ¨ï¼Œwx.getStorageSync('logs' )çš„å€¼å°±æ˜¯0æˆ–nullï¼Œé‚£ä¹ˆå°±è¿”å›ä¸€ä¸ªç©ºæ•°ç»„
> var logs =wx.getStorageSync('logs') || []
> logs.unshift(Date.now())
> wx.setStorageSync('logs', logs)
> ```
>
> 1. å¦‚ä¸Šæ‰€ç¤ºï¼Œè°ƒç”¨äº†**wx.getStorageSync**å’Œ**wx.setStorageSync**è¿™2ä¸ªAPIï¼Œè¿™å°±æ˜¯å°ç¨‹åºä¸ºæˆ‘ä»¬æä¾›çš„**æœ¬åœ°å­˜å‚¨API**
> 2. `wx.setStorageSync(key, data)`ï¼šå°† data å­˜å‚¨åœ¨æœ¬åœ°ç¼“å­˜ä¸­æŒ‡å®šçš„ key ä¸­ï¼Œä¼šè¦†ç›–æ‰åŸæ¥è¯¥ key å¯¹åº”çš„å†…å®¹ï¼Œè¿™æ˜¯ä¸€ä¸ª**åŒæ­¥**æ¥å£ã€‚
> 3. `wx.getStorageSync(key)`ï¼šä»æœ¬åœ°ç¼“å­˜ä¸­åŒæ­¥è·å–æŒ‡å®škeyå¯¹åº”çš„å†…å®¹ã€‚

****

### 11. è·å–å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯çš„æ¥å£

[ç”¨æˆ·ä¿¡æ¯æˆæƒå¼¹çª—](https://developers.weixin.qq.com/community/develop/doc/0000a26e1aca6012e896a517556c01)

```vue
// 1.ä½¿ç”¨button open-type="getuserinfo"
<button open-type="getUserInfo" bindgetuserinfo="getUserInfoFunc">
  get user infomation
</button>

// js
getUserInfoFunc(res) {
  console.log(res);
}
```

```js
// 2.ä½¿ç”¨data
data: {
  canIUse: wx.canIUse('button.open-type.getUserInfo')
}
```

****

### 12. wxçš„openIdä»¥åŠwx.login + res.code

[å¾®ä¿¡è·å–openIdä¸ºä½•éœ€è¦wx.login+res.codeå‘é€è¯·æ±‚ï¼Ÿ](https://developers.weixin.qq.com/ebook?action=get_post_info&docid=000cc48f96c5989b0086ddc7e56c0a)ï¼šè¿™æ˜¯å®˜æ–¹çš„è§£ç­”ã€‚

`openId`ï¼šåœ¨å…³æ³¨è€…ä¸å…¬ä¼—å·äº§ç”Ÿæ¶ˆæ¯äº¤äº’å,å…¬ä¼—å·å¯è·å¾—å…³æ³¨è€…çš„OpenID(åŠ å¯†åçš„å¾®ä¿¡å·,æ¯ä¸ªç”¨æˆ·å¯¹æ¯ä¸ªå…¬ä¼—å·çš„OpenIDæ˜¯å”¯ä¸€çš„ã€‚å¯¹äºä¸åŒå…¬ä¼—å·,åŒä¸€ç”¨æˆ·çš„openidä¸åŒ)ã€‚

> å‡å¦‚åªæ˜¯é€šè¿‡ä¸€ä¸ªæ¥å£æ¥è·å–ç”¨æˆ·çš„ä¿¡æ¯ï¼Œå¦‚é€šè¿‡wx.requestè¯·æ±‚ https://test.com/getUserInfo?id=1 æ‹‰å–åˆ°å¾®ä¿¡ç”¨æˆ·idä¸º1åœ¨æˆ‘ä»¬ä¸šåŠ¡ä¾§çš„ä¸ªäººä¿¡æ¯ï¼Œé‚£ä¹ˆé»‘å®¢å°±å¯ä»¥é€šè¿‡éå†æ‰€æœ‰çš„idï¼ŒæŠŠæ•´ä¸ªä¸šåŠ¡ä¾§çš„ä¸ªäººä¿¡æ¯æ•°æ®å…¨éƒ¨æ‹‰èµ°ã€‚ï¼ˆæš´åŠ›æ³•éå†è·å–ç”¨æˆ·ä¿¡æ¯ï¼‰
>
> 1. ä¸ºäº†é¿å…è¿™æ ·çš„é£é™©ï¼Œwx.loginæ˜¯ç”Ÿæˆä¸€ä¸ªå¸¦æœ‰æ—¶æ•ˆæ€§çš„å‡­è¯ï¼Œå°±åƒæ˜¯ä¸€ä¸ªä¼šè¿‡æœŸçš„ä¸´æ—¶èº«ä»½è¯ä¸€æ ·ï¼Œåœ¨wx.loginè°ƒç”¨æ—¶ï¼Œä¼šå…ˆåœ¨å¾®ä¿¡åå°ç”Ÿæˆä¸€å¼ ä¸´æ—¶çš„èº«ä»½è¯`res.code`ï¼Œå…¶æœ‰æ•ˆæ—¶é—´ä»…ä¸º5åˆ†é’Ÿã€‚
> 2. å¯ä»¥é€šè¿‡è¿™ä¸ªä¸´æ—¶çš„ç™»å½•å‡­è¯å»å¾®ä¿¡æä¾›çš„æ¥å£æ¥è·å–ç›¸åº”çš„å”¯ä¸€æ ‡è¯†ç¬¦`openId`ã€‚å¦‚æœ5åˆ†é’Ÿå†…å°ç¨‹åºçš„åå°ä¸æ‹¿ç€è¿™ä¸ªä¸´æ—¶èº«ä»½è¯æ¥å¾®ä¿¡åå°æœåŠ¡å™¨æ¢å–å¾®ä¿¡ç”¨æˆ·idçš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªèº«ä»½è¯å°±ä¼šè¢«ä½œåºŸï¼Œéœ€è¦å†è°ƒç”¨wx.loginé‡æ–°ç”Ÿæˆç™»å½•å‡­è¯ã€‚
>
> ç”±äºè¿™ä¸ª**ä¸´æ—¶èº«ä»½è¯5åˆ†é’Ÿåä¼šè¿‡æœŸ**ï¼Œå¦‚æœé»‘å®¢è¦å†’å……ä¸€ä¸ªç”¨æˆ·çš„è¯ï¼Œé‚£ä»–å°±å¿…é¡»åœ¨5åˆ†é’Ÿå†…ç©·ä¸¾æ‰€æœ‰çš„èº«ä»½è¯idï¼Œç„¶åå»å¼€å‘è€…æœåŠ¡å™¨æ¢å–çœŸå®çš„ç”¨æˆ·èº«ä»½ã€‚æ˜¾ç„¶ï¼Œé»‘å®¢è¦ä»˜å‡ºéå¸¸å¤§çš„æˆæœ¬æ‰èƒ½è·å–åˆ°ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ï¼ŒåŒæ—¶ï¼Œå¼€å‘è€…æœåŠ¡å™¨ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ£€æµ‹åˆ°5åˆ†é’Ÿå†…é¢‘ç¹ä»æŸä¸ªipå‘é€è¿‡æ¥çš„ç™»å½•è¯·æ±‚ï¼Œä»è€Œæ‹’ç»æ‰è¿™äº›è¯·æ±‚ã€‚

```js
wx.login({
  success: (res) => {
    if(res.code) {
      wx.request({
        // æ­¤urlæ˜¯å®˜æ–¹æä¾›çš„æ¥å£
        url: 'https://api.weixin.qq.com/sns/jscode2session?appid=APPID&secret=SECRET&js_code=JSCODE&grant_type=authorization_code',
        method: 'GET',
        data: {
          appid: 'xxxxx',
          secret: 'xxxx', //è¿™ä¸ªä¸èƒ½æ³„æ¼ï¼Œä¸€æ—¦æ³„æ¼å°±è¦é‡ç½®
          js_code: res.code,
          grant_type: 'authorization_code',
        },
        header: {
          'content-type': 'application/json'
        },
        success(res) {
          //ç¼“å­˜æ“ä½œ
        }
      })
    }
  }
})
```

ä½†æ˜¯æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œ`secret`å­—æ®µä¸èƒ½æ³„æ¼ï¼Œå› æ­¤**è¦æŠŠè®¿é—®å®˜æ–¹æ¥å£æ”¾åœ¨åç«¯å®ç°**ï¼Œå†å‘å‰ç«¯æš´éœ²ä¸€ä¸ªæ¥å£ã€‚å‰ç«¯åªè¦å‘åç«¯ä¼ å…¥`res.code`å³å¯ï¼Œè€Œä¸ç”¨çŸ¥é“`appid`å’Œ`secret`ã€‚

****

### 13. app.jsä¸­onLaunchè®¾ç½®å…¨å±€æ•°æ®æ¯”page.jsä¸­onLoadæ‰§è¡Œæ›´æ…¢çš„å¼‚æ­¥é—®é¢˜

app.onLaunchåº”è¯¥æ˜¯å…ˆæ‰§è¡Œï¼Œä½†å¹¶ä¸ä¸€å®šæ¯”page.onLoadå…ˆç»“æŸã€‚

å¦‚æœpage.onLoadé‡Œé¢æœ‰ä¸€äº›éœ€è¦ç­‰å¾…app.onLaunchæ”¹å˜çš„å€¼(wx.request)ï¼Œå°±ä¼šäº§ç”Ÿé£é™©ã€‚

******

### 14. è‡ªå®šä¹‰tabBar

[å¾®ä¿¡å°ç¨‹åºè‡ªå®šä¹‰tabbar](https://www.jianshu.com/p/8b918e21cc6b)

[å®˜æ–¹è‡ªå®šä¹‰tabBaræŒ‡å—](https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html?search-key=è‡ªå®šä¹‰tabbar)

[å¾®ä¿¡å°ç¨‹åº--è·å–tabBarçš„é«˜åº¦](https://blog.csdn.net/github_36843038/article/details/94563443)

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®˜æ–¹ç»„ä»¶çš„`åŸç”ŸtabBar`å¹¶ä¸è®¡ç®—åœ¨`windowHeight`ã€‚

è¯¦ç»†å¯ä»¥çœ‹æœ¬æ–‡çš„`4. è‡ªå®šä¹‰navigationBar`ã€‚

****

### 15. è‡ªå®šä¹‰é®ç½©+ç‚¹å‡»é™å®šåŒºåŸŸå¤–æ‰å–æ¶ˆé®ç½©

[å°ç¨‹åºå¾—èƒŒæ™¯åŠé€æ˜ï¼Œå†…å®¹ä¸é€æ˜æ€ä¹ˆå®ç°](https://developers.weixin.qq.com/community/develop/doc/00042c4a050840dd1246d545f53c00)ï¼š`background:rgab(0,0,0,0.8);color:#fff;`

é‡ç‚¹åœ¨äºï¼šæŒ‡å®šåŒºåŸŸçš„`view`é˜»æ­¢å†’æ³¡äº‹ä»¶ï¼Œè®¾ç½®`catchtap="func"`ã€‚

wxmlï¼š

```vue
<view class="mask-view" wx:if="{{showPostal}}" bindtap="closeMask">
	<view class='postal-view' id="postal-view-id" catchtap="catchMask"></view>
</view>
```

wxssï¼š

```css
.mask-view{
  width: 100%;
  background: rgba(0, 0, 0, 0.4);
  position: fixed;
  top: 0;
  height: 100%;
  z-index: 9998;
}

.postal-view{
  // è®¾ç½®å±…ä¸­
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  align-items: center;
}
```

jsï¼š

```js
closeMask(e) {
	// console.log(e);
	this.setData({
		showPostal: false,
	})
},
  
catchMask(e) {
  console.log(e);
}
```

****

### 16. canvasç”Ÿæˆæµ·æŠ¥é—®é¢˜

[å¾®ä¿¡å°ç¨‹åºåˆ†äº«ä¹‹ç”Ÿæˆæµ·æŠ¥--canvas](https://www.cnblogs.com/imMeya/p/11454798.html)

[å¾®ä¿¡å°ç¨‹åºcanvasç”Ÿæˆåˆ†äº«å›¾ç‰‡æµ·æŠ¥æ¨¡ç³Šè§£å†³æ–¹æ³•](https://blog.csdn.net/memeda61/article/details/92831680)ï¼šç”»çš„æ—¶å€™å¤šå€ç”»ï¼ˆå¦‚é‡‡ç”¨10å€ä½œå›¾ï¼‰ï¼Œå±•ç¤ºçš„æ—¶å€™å†æŒ‰éœ€ç¼©å°å±•ç¤ºã€‚

[å¾®ä¿¡å°ç¨‹åº canvasç”»å¸ƒæ¸²æŸ“ç½‘ç»œå›¾ç‰‡](https://blog.csdn.net/smile0315/article/details/102708891)ï¼šåœ¨å›è°ƒæˆåŠŸ`success`é‡Œè¿›è¡Œç»˜åˆ¶ã€‚

[å¾®ä¿¡å°ç¨‹åº--å›¾ç‰‡æœ¬åœ°ç¼“å­˜ä¸canvasç»˜åˆ¶](https://www.jianshu.com/p/407254e1fe22?utm_campaign=maleskine&utm_content=note&utm_medium=seo_notes&utm_source=recommendation)ï¼šä½¿ç”¨`getImageInfo`æˆ–è€…`downloadFile`å˜æˆæœ¬åœ°æ–‡ä»¶ã€‚

[canvas.save()ä¸canvas.restore()](https://blog.csdn.net/tailyou0506/article/details/50680476)ï¼šå¤šæ¬¡ç»˜åˆ¶ç”¨æˆå¯¹çš„`save`å’Œ`restore`ã€‚

- [ ] å°è¯•ä½¿ç”¨canvas 2Dï¼š[canvasContext.clearRect()æ¸…é™¤2dcanvasæ— æ•ˆï¼Ÿ](https://developers.weixin.qq.com/community/develop/doc/00042a24688d306412fa579f45b400)

â€‹	æŒ‰ç…§æ­£å¸¸æµç¨‹å…ˆæ€»ç»“ä¸€ä¸‹ï¼Œåç»­ç»†èŠ‚åœ°æ–¹é‡åˆ°çš„é—®é¢˜æ”¾åœ¨æ­£å¸¸æµç¨‹å„ç‚¹åé¢ã€‚

â€‹	**æ­£å¸¸æµç¨‹**ï¼š

1.ä½¿ç”¨canvasä½œç”»ï¼Œåœ¨wxmlå®šä¹‰`canvas`ã€‚

> è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼šåœ¨wxmlå®šä¹‰`<canvas canvas-id="postalCanvas"></canvas>`çš„æ—¶å€™ï¼Œä¸èƒ½æ˜¯éšè—èµ·æ¥çš„ï¼Œå³ç‰¹åˆ«æ³¨æ„`wx:if="{{true}}"`å’Œ`hidden="{{true}}"`ã€‚
>
> ä½†æ˜¯ç”±äºç»˜åˆ¶äº†canvasåªæ˜¯éœ€è¦åœ¨canvasä½œå›¾å¾—åˆ°éœ€è¦çš„å›¾ç‰‡æ‹¼å‡‘ï¼Œå› æ­¤å¹¶ä¸å¸Œæœ›çœ‹åˆ°canvasç»„ä»¶å‡ºç°åœ¨é¡µé¢å½“ä¸­ï¼Œå› æ­¤éœ€è¦å¯¹canvasçš„æ ·å¼ä¿®æ”¹ï¼Œfixåœ¨é¡µé¢ä¹‹å¤–ï¼Œè¿™æ ·å°±å¯ä»¥é—´æ¥éšè—ã€‚

```html
<!-- page.wxml -->
<canvas clas="postal-canvas" canvas-id="postalCanvas"></canvas>
```

```css
/* page.wxss */
.canvas-view {
  /* ä¸è®©ç”¨æˆ·çœ‹åˆ°canvasï¼Œåé¢çœ‹çœ‹æœ‰æ²¡æœ‰åˆ«çš„åŠæ³• */
  margin-top: 10000px;
  position: fixed;
}
```



2.ä½¿ç”¨`wx.createCanvasContext('canvasId')`ï¼Œå¹¶ä¸”ç»˜åˆ¶ä¸€ä¸ªå¯æ“ä½œçš„çŸ©å½¢åŒºåŸŸã€‚

> è¿™é‡Œçš„å¯æ“ä½œçŸ©é˜µåŒºåŸŸçš„å¤§å°å€¼å¾—è€ƒé‡ã€‚æ¯”å¦‚ç°åœ¨æˆ‘æƒ³è¦ç»˜åˆ¶ä¸€ä¸ª250 * 250(px)çš„å›¾ç‰‡å¹¶ä¸”å¯¼å‡ºï¼Œé‚£ä¹ˆå¦‚æœæŒ‰ç…§ç›¸åŒæ¯”ä¾‹ç»˜åˆ¶çš„æ—¶å€™ï¼Œå°±å¯èƒ½å¯¼è‡´**canvasåƒç´ ä¸å¤Ÿé«˜è€Œæ¨¡ç³Š**ï¼Œå› ä¸ºåœ¨ç»˜åˆ¶çš„è¿‡ç¨‹ä¸­ç»˜åˆ¶å›¾ç‰‡ç­‰è¿›è¡Œå‹ç¼©ä¹‹åå°±ä¼šäº§ç”Ÿæ¨¡ç³Šï¼Œå› æ­¤æœ€å¥½çš„æ–¹å¼æ˜¯å°½é‡æŒ‰ç…§ç»˜åˆ¶å›¾ç‰‡çš„åŸå›¾æ¯”ä¾‹è¿›è¡Œç»˜åˆ¶ï¼Œæœ€åå†åœ¨éœ€è¦å±•ç¤ºçš„æ—¶å€™ç›¸åº”è°ƒæ•´å¤§å°å±•ç¤ºå³å¯ã€‚æ¯”å¦‚åœ¨`drawImage()`çš„æ—¶å€™ï¼Œå›¾ç‰‡åŸæœ¬çš„å¤§å°æ˜¯3000 * 3000ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿›è¡Œç›¸åŒæ¯”ä¾‹çš„`ctx.fillRec(0, 0, 3000, 3000)`è¿›è¡Œç»˜åˆ¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›¸åº”ç¼©å°ï¼Œä½¿ç”¨1500 * 1500å³å¯ä¿è¯ä¸€å®šçš„åƒç´ ã€‚å‚è€ƒ[å¾®ä¿¡å°ç¨‹åºcanvasç”Ÿæˆåˆ†äº«å›¾ç‰‡æµ·æŠ¥æ¨¡ç³Šè§£å†³æ–¹æ³•](https://blog.csdn.net/memeda61/article/details/92831680)ã€‚
>
> ```js
> createPostal() {
>   var ctx = wx.createCanvaasContex("postalCanvas");
>   ctx.fillRect(0, 0, width, height);
> }
> ```



3.ç»˜åˆ¶å›¾ç‰‡ä½¿ç”¨ç»˜åˆ¶æ¥å£`canvas.drawImage()`ï¼Œç»˜åˆ¶æ–‡å­—ä½¿ç”¨æ¥å£`canvas.fillText()`

> `canvas.drawImage()`ï¼šç»˜åˆ¶å›¾ç‰‡çš„æ—¶å€™éœ€è¦æä¾›ä¸€ä¸ªå›¾ç‰‡è·¯å¾„ï¼Œè¿™ä¸ªå›¾ç‰‡è·¯å¾„æœ‰å¯èƒ½æ˜¯ç½‘ç»œå›¾ç‰‡ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æœ¬åœ°å›¾ç‰‡ã€‚æœ¬åœ°å›¾ç‰‡çš„æ—¶å€™ç»˜åˆ¶å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨ç½‘ç»œå›¾ç‰‡çš„æ—¶å€™å°±æœ‰é—®é¢˜ã€‚æ ¹æ®å®˜æ–¹æ–‡æ¡£[canvas.drawImage()](https://developers.weixin.qq.com/miniprogram/dev/api/canvas/CanvasContext.drawImage.html)ï¼Œç»˜åˆ¶ç½‘ç»œå›¾ç‰‡çš„æ—¶å€™è¦ä½¿ç”¨`getImageInfo` / `downloadFile`å…ˆä¸‹è½½ã€‚å› æ­¤å…·ä½“çš„ç»˜åˆ¶æ“ä½œå¯ä»¥åœ¨`getImageInfo`å†…éƒ¨è¿›è¡Œæ“ä½œã€‚å‚è€ƒ[å¾®ä¿¡å°ç¨‹åº--å›¾ç‰‡æœ¬åœ°ç¼“å­˜ä¸canvasç»˜åˆ¶](https://www.jianshu.com/p/407254e1fe22?utm_campaign=maleskine&utm_content=note&utm_medium=seo_notes&utm_source=recommendation)ä»¥åŠ[å¾®ä¿¡å°ç¨‹åº canvasç”»å¸ƒæ¸²æŸ“ç½‘ç»œå›¾ç‰‡](https://blog.csdn.net/smile0315/article/details/102708891)ã€‚
>
> åŒæ—¶ï¼Œä½¿ç”¨`getImageInfo`è·å–äº†å›¾ç‰‡çš„é•¿å®½ä¹‹åå¯ä»¥è®¡ç®—æ¯”ä¾‹ï¼Œä½¿å¾—ç»˜åˆ¶çš„æ—¶å€™ä¸å˜å½¢ã€‚
>
> ```js
> // page.js
> createPostal() {
>   wx.getImageInfo() {
>     src: httpImage,
>     success(e) {
>       var ctx = wx.createCanvasContext('postalCanvas');
>       ctx.fillRect(0, 0, width, height);
>       ctx.drawImage(e.path, x, y, widthe, height);
>     }
>   }
> }
> ```
>
> `canvas.fillText()`ï¼šåœ¨ç»˜åˆ¶æ–‡å­—ä¹‹å‰éœ€è¦ç¡®å®šæ–‡å­—çš„å¤§å°`canvas.setFontSize(10)`ä»¥åŠæ–‡å­—çš„å¯¹é½æ–¹å¼`canvas.setTextAlign('left')`ï¼Œé»˜è®¤å·¦å¯¹é½ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**(1)**åœ¨ç»˜åˆ¶è¿‡ç¨‹ä¸­å¦‚æœè®¾ç½®äº†ä¸€æ¬¡å¯¹é½æ–¹å¼ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„æ–‡å­—éƒ½ä¼šæŒ‰ç…§è¿™ä¸ªå¯¹é½æ–¹å¼ã€‚å› æ­¤å¦‚æœä¸åŒæ–‡å­—æœ‰ä¸åŒçš„å¯¹é½éœ€æ±‚ï¼Œéœ€è¦åœ¨ä¸åŒæ–‡å­—ä¹‹å‰åˆ†åˆ«å£°æ˜ï¼Œæ–‡å­—çš„å¤§å°ä¹ŸåŒç†ã€‚**(2)**`canvas.setTextAlign()`çš„å¯¹é½æ–¹å¼ä¼šæ ¹æ®`fillText()`ç»™å‡ºçš„åæ ‡ç‚¹è¿›è¡Œå¯¹é½ï¼Œ`'left'`è¡¨ç¤º`(x,y)`æ˜¯æœ€å·¦ä¾§ï¼›`'center'`è¡¨ç¤º`(x,y)`æ˜¯æ–‡å­—çš„æœ€ä¸­é—´ï¼›`'right'`åˆ™è¡¨ç¤º`(x,y)`æ˜¯æ–‡å­—çš„æœ€å³ä¾§ã€‚å¦‚æœæƒ³è¦æ”¹å˜å­—ä½“é¢œè‰²çš„è¯ï¼Œå¯ä»¥è®¾ç½®é€šè¿‡è®¾ç½®`canvas.setFillStyle('grey')`ï¼šéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè®¾ç½®äº†ä¹‹åæ— è®ºç»˜åˆ¶ä»€ä¹ˆå†…å®¹éƒ½ä¼šå˜æˆè¯¥é¢œè‰²ï¼Œå› æ­¤è¦æ³¨æ„ä½¿ç”¨`save`å’Œ`resore`ï¼Œæˆ–è€…åœ¨ç›¸åº”çš„åœ°æ–¹éƒ½è®¾ç½®ä¸€ä¸‹styleã€‚
>
> ```js
> // page.js
> createPostal() {
>   var ctx = wx.createCanvasContext('postalCanvas');
> 	ctx.fillRect(0, 0, width, height);
>   
>   ctx.setFontSize(75);
>   ctx.setTextAlign('left');
> 	ctx.fillText("left", x, y);
>   
>   ctx.setFontSize(95);
>   ctx.setTextAlign('center');
> 	ctx.fillText("center", x, y);
> }
> ```



4.å®Œæˆç»˜åˆ¶åï¼Œä½¿ç”¨`draw()`ç»“æŸç»˜åˆ¶ã€‚

> åœ¨ä¸åŒçš„ç»˜åˆ¶æ—¶é—´é‡Œå¯èƒ½æœ‰ä¸åŒçš„ç»˜åˆ¶éœ€æ±‚ï¼Œæ¯”å¦‚ç¬¬ä¸€æ¬¡ç»˜åˆ¶äº†ä¸€ä¸ªèƒŒæ™¯å›¾ç‰‡è¦†ç›–å…¨éƒ¨ï¼Œç¬¬äºŒæ¬¡æƒ³ç»˜åˆ¶å¦ä¸€ä¸ªå›¾ç‰‡è¦†ç›–åœ¨ç¬¬ä¸€æ¬¡ç»˜åˆ¶å›¾ç‰‡çš„æŸä¸ªä½ç½®ã€‚å³ç¬¬ä¸€æ¬¡ç»˜åˆ¶èƒŒæ™¯ï¼Œç¬¬äºŒæ¬¡ç»˜åˆ¶å±•ç¤ºå›¾ç‰‡ã€‚å°±éœ€è¦ä½¿ç”¨åˆ°`canvas.save()`ä»¥åŠ`canvas.restore()`ã€‚ä½¿ç”¨äº†`canvas.save()`ä¹‹åï¼Œå¤¹åœ¨ä¸‹ä¸€ä¸ª`canvas.restore()`ä¼šè¢«ä¿å­˜ä¸‹æ¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠä¸‹ä¸€æ¬¡æ“ä½œæ”¾åœ¨`canvas.restore()`ä¹‹åè¿›è¡Œç»˜åˆ¶ã€‚å‚è€ƒ[canvas.save()ä¸canvas.restore()](https://blog.csdn.net/tailyou0506/article/details/50680476)ã€‚
>
> ```js
> // page.js
> createPostal() {
>   var ctx = wx.createCanvasContext('postalCanvas');
> 	ctx.fillRect(0, 0, width, height);
>   
>   ctx.save();
>   ctx.drawImage('/images/a.png', x, y, width, height);
>   
>   ctx.restore();
>   ctx.save();
>   ctx.drawImage('/images/b.png', x, y, width, height);
>   
>   ctx.restore();
>   ctx.drawImage('/images/c.png', x, y, width, height);
>   
>   ctx.draw();
> }
> ```



5.å¯¼å‡ºæˆªå›¾æ–‡ä»¶ï¼Œ`wx.canvasToTempFilePath`

> å¯¼å‡ºæˆªå›¾æ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä¸€ä¸ªå¼‚æ­¥é—®é¢˜ï¼Œå³canvaså¹¶æœªç»“æŸæƒ³è¦çš„ç»˜åˆ¶è¿‡ç¨‹ï¼Œè€Œå·²ç»å¼€å§‹å¼‚æ­¥æ‰§è¡Œ`wx.canvasToTempFilePath`ï¼Œé‚£ä¹ˆæœ€åæˆªå›¾å‡ºæ¥çš„å°±ä¸æ˜¯æƒ³è¦çš„ç»“æœã€‚å› æ­¤éœ€è¦ä½¿ç”¨`setTimeout`æ¥ç­‰å¾…1-2sç­‰ç»˜åˆ¶ç»“æŸã€‚ç›¸åº”å¯ä»¥ç»™ä¸€ä¸ªç­‰å¾…Toast.

```js
// page.js
wx.showToast({
	title: 'ç»˜åˆ¶ä¸­',
	icon: 'loading',
	duration: 2000,
})

setTimeout(() => {
	wx.canvasToTempFilePath({
		x: 0,
		y: 0,
		width: that.data.widthCanvas,
		height: that.data.heightCanvas,
		destWidth: that.data.widthCanvas,
		destHeight: that.data.heightCanvas,
		anvasId: 'postalCanvas',
		success(res) {
    	console.log(res);
  	}
} ,2000);

```

****

### 17. å¾®ä¿¡å°ç¨‹åºäºŒç»´ç ã€data:image/png;base64 åŠcanvasç»˜åˆ¶é—®é¢˜

[ä¸€ç‰©ä¸€ç æ¥å£æ–‡æ¡£](https://developers.weixin.qq.com/doc/offiaccount/Unique_Item_Code/Unique_Item_Code_API_Documentation.html)

[è·å–å°ç¨‹åºç ](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/qr-code.html)

[data:image/png;base64çš„ç”¨æ³•è¯¦è§£](https://www.cnblogs.com/haoji/p/11446488.html)

- [x] bugå†…å®¹ï¼šåœ¨canvasä¸Šç»˜åˆ¶base64ç±»å‹çš„äºŒç»´ç å¤±è´¥ï¼Œæ²¡æœ‰ç»˜åˆ¶å‡ºæ¥ï¼Œä½†æ˜¯æ²¡æœ‰æŠ¥é”™ã€‚

- [x] æ•´ä½“çš„debugæ€è·¯ï¼šæ£€æŸ¥base64ç±»å‹çš„äºŒç»´ç å›¾ç‰‡åœ¨`<image>`ç»„ä»¶èƒ½å¦æ­£å¸¸å±•ç¤º -> æ£€æŸ¥canvasç»˜åˆ¶å¤±è´¥åŸå› 

â€‹	å¾®ä¿¡å°ç¨‹åºäºŒç»´ç å­˜åœ¨å‡ ä¸ªæ¥å£ï¼Œå¯ä»¥å‚è€ƒ[è·å–å°ç¨‹åºç ](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/qr-code.html)æŒ‰éœ€ä½¿ç”¨ä¸åŒçš„äºŒç»´ç ã€‚äºŒç»´ç ä¸€èˆ¬éœ€è¦åœ¨åç«¯å®ç°ï¼Œå› ä¸ºæ¶‰åŠåˆ°appIdä»¥åŠsecretã€‚å°ç¨‹åºäºŒç»´ç å®˜æ–¹æ¥å£ä¼šè¿”å›ä¸€ä¸ª`array`å­—æ®µçš„æ•°æ®ï¼Œä¸€èˆ¬åœ¨åç«¯è¿›è¡Œ`arrayToBase64`çš„å¤„ç†ï¼Œå› æ­¤å‰ç«¯ä¼šè·å–åˆ°ä¸€ä¸ª`base64`ç±»å‹çš„å­—ç¬¦ä¸²ã€‚

â€‹	1.ç»è¿‡æµ‹è¯•ï¼Œç›´æ¥ä½¿ç”¨åç«¯è¿”å›çš„`base64`ç±»å‹å­—æ®µä¸èƒ½æŒ‰ç…§é¢„æœŸå±•ç¤ºå‡ºå›¾ç‰‡ã€‚`<image/>`ç»„ä»¶å¯ä»¥æ¥æ”¶`base64`çš„å›¾ç‰‡æ ¼å¼ï¼Œæ¯”å¦‚ï¼š

```xml
<image src='{{base64Src}}'></image>
```

ä½†æ˜¯ä»åç«¯æ¥æ”¶åˆ°ä¸€ä¸ª`base64`ç±»å‹ï¼Œå¹¶ä¸èƒ½å¦‚æœŸå±•ç¤ºã€‚éœ€è¦`wx.base64ToArrayBuffer`ä»¥åŠ`wx.arrayBufferToBase64`æ¥å£é‡æ–°è½¬æ¢ä¸€éï¼š

```js
// page.js
var arr = wx.base64ToArrayBuffer(base64Src);
var base64Img = 'data:image/png;base64,' + wx.arrayBufferToBase64(arr);
```

```xml
<!-- page.wxml -->
<image src="{{base64Img}}"></image>
```

â€‹	2.ä¸Šè¿°çš„å®Œæˆäº†imageçš„debugä¹‹åï¼Œè§£å†³äº†base64Srcé—®é¢˜ã€‚ä½†æ˜¯åœ¨imageä¸Šèƒ½æ­£å¸¸å±•ç¤ºï¼Œè¿˜æ˜¯æ— æ³•ç»˜åˆ¶åˆ°canvasä¸Šé¢ï¼ˆåœ¨ç”µè„‘ä¸Šç»˜åˆ¶æ­£å¸¸ï¼Œè€Œåœ¨æ‰‹æœºä¸Šç»˜åˆ¶å¤±è´¥ï¼‰ã€‚å›é¡¾ä¸€ä¸‹`canvas.drawImage()`æ³¨æ„äº‹é¡¹ï¼šéœ€è¦å¯¹ç½‘ç»œå›¾ç‰‡`getImageInfo` / `downloadFile`å…ˆä¸‹è½½å˜æˆæœ¬åœ°å›¾ç‰‡ï¼Œå› æ­¤`base64`æ˜¯å¦ä¹Ÿæœ‰ç±»ä¼¼çš„æ³¨æ„ç‚¹ã€‚æœ€åæœç´¢åˆ°ä¸€ç¯‡å‚è€ƒè¿›è¡Œå°è¯•ï¼š[å¾®ä¿¡å°ç¨‹åºä¹‹å°†base64å›¾ç‰‡è½¬ä¸ºæœ¬åœ°å›¾ç‰‡](https://blog.csdn.net/leo_xian/article/details/107141294)ã€‚å…¶ä¸­ä»£ç ä¸­éœ€è¦ç”¨`.replace`å»æ‰ç©ºæ ¼çš„åŸå› å‚è€ƒå¦ä¸€ç¯‡æ–‡ç« ï¼š[å¾®ä¿¡å°ç¨‹åºwx.base64ToArrayBufferè°ƒç”¨ï¼Œæç¤ºthirdScriptError "atob" failed;undefined Error: "atob" failed](https://www.codeleading.com/article/4043730355/)ã€‚

```js
// page.js
base64ToLocalImage() {
	let code = base64Src; // åå°è¿”å›çš„base64å›¾ç‰‡ï¼Œæ²¡æœ‰å¸¦data:image/png;base64,çš„å‰ç¼€ã€‚
	//let src = `data:image/png;base64,${code}`;
	const fsm = wx.getFileSystemManager();  // è·å–æ–‡ä»¶ç®¡ç†å™¨
	code = code .replace(/\ +/g, ""); //å»æ‰ç©ºæ ¼æ–¹æ³•
	code = code .replace(/[\r\n]/g, "");

	const buffer = wx.base64ToArrayBuffer(code );  //  å°† base64 å­—ç¬¦ä¸²è½¬æˆ ArrayBuffer å¯¹è±¡
	const fileName = wx.env.USER_DATA_PATH + '/share_img.png';  // æ–‡ä»¶ç³»ç»Ÿä¸­çš„ç”¨æˆ·ç›®å½•è·¯å¾„ ï¼ˆæœ¬åœ°è·¯å¾„ï¼‰
/**
* @param fileName: æ–‡ä»¶è·¯å¾„
* @param buffer : è¦å†™å…¥çš„æ–‡æœ¬æˆ–äºŒè¿›åˆ¶æ•°æ®
* @param binary: æŒ‡å®šå†™å…¥æ–‡ä»¶çš„å­—ç¬¦ç¼–ç 
*/
	fsm.writeFileSync(fileName, buffer, 'binary');  // å†™å…¥æ–‡ä»¶ï¼Œ åŒæ­¥æ–¹æ³•

	console.log(fileName);  // å†™å…¥æˆåŠŸåå°±å¯ä»¥è®¿é—®åˆ°è¯¥å›¾ç‰‡è·¯å¾„äº†
}
```

****

### 18. å˜é‡ç®¡ç†ç»„ä»¶æ ·å¼ & rpx

[å¾®ä¿¡å°ç¨‹åº - rpxå’Œpxäº’è½¬ï¼Œä»¥åŠç³»ç»Ÿç»™çš„ pixelRatio å€¼æ¯”ä¾‹ä¸å¯¹](https://blog.csdn.net/zz00008888/article/details/109023879)

å…ˆè¦ç†è§£æ‰‹æœºå„ä¸ªå…ƒç´ çš„å…³ç³»ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹æœ¬æ–‡çš„`4. è‡ªå®šä¹‰navigationBar`ã€‚

ç”±äº`scroll-view`éœ€è¦æŒ‡å®šå›ºå®šçš„é«˜åº¦ï¼Œå› æ­¤éœ€è¦ç”¨ä¸€è‡´çš„å•ä½ç®¡ç†é¡µé¢ç»„ä»¶ï¼Œè¿™æ ·æ‰èƒ½è·å–å‰©ä¸‹çš„å¯åˆ†é…é«˜åº¦ç„¶åç»™`scroll-view`çš„`style= "height: xx rpx;"`è¿›è¡Œç®¡ç†ã€‚å› æ­¤å°±éœ€è¦å­¦ä¼š`1.rpxäºpxçš„è½¬åŒ–è§„åˆ™`ï¼Œ`2.å±å¹•çª—å£æ“ä½œå†…å®¹çš„å…³ç³»`ï¼Œ`3.å˜é‡ç®¡ç†å…ƒç´ æ ·å¼`ã€‚

>  å¾®ä¿¡å°ç¨‹åºå°†æ‰€æœ‰çš„å±å¹•çš„å®½åº¦éƒ½è§„å®šæˆ**750rpx**ã€‚è½¬æ¢æ¯”`devicePixelRatio = 750/ pxå€¼`ã€‚æ¯”å¦‚æ‰‹æœºå®½åº¦æ˜¯375pxï¼Œé‚£ä¹ˆ`dpr = 2`ã€‚
>
> ä½†æ˜¯`wx.getSystemInfo`è¿”å›çš„`dpr`æ˜¯æ•´æ•°ï¼ˆç²¾ç¡®åº¦ä¸å¤Ÿï¼‰ï¼Œæœ€å¥½çš„æ–¹å¼è¿˜æ˜¯é€šè¿‡è·å–å±å¹•çš„å®½åº¦`windowWidth`ç„¶åé€šè¿‡`dpr = 750/ windowWidth`æ¥è®¡ç®—å¾—å‡ºï¼Œè¿™æ ·æ›´è´´è¿‘çœŸå®çš„æ¯”ä¾‹ã€‚

> è‡ªå®šä¹‰`navigationBar`çš„è¯ï¼Œ`windowHeight`çš„é«˜åº¦å®é™…ä¸Šå°±æ˜¯æ€»çš„å±å¹•é«˜åº¦`screenHeight` - `åŸç”Ÿç»„ä»¶tabBarHeight`ã€‚æ ¹æ®`wx.getSystemInfo`æ¥å£è¿”å›ï¼Œ`screenHeight`å’Œ`windowHeight`éƒ½ä¼šè¿”å›ã€‚

â€‹	å˜é‡ç®¡ç†çš„ä¸»è¦æ–¹å¼æ˜¯ï¼Œåœ¨å…ƒç´ çš„`style`ç®¡ç†å®½åº¦é«˜åº¦ï¼Œé€šè¿‡æ¸²æŸ“æ—¶å˜é‡è®¡ç®—ä»è€Œå¾—åˆ°å‰©ä½™éƒ¨åˆ†é«˜åº¦ã€‚æ¯”å¦‚`scroll-view`å¿…é¡»æŒ‡å®šå›ºå®šé«˜åº¦ï¼Œå°±å¯ä»¥é‡‡ç”¨è¿™æ ·çš„å˜é‡ç®¡ç†æ–¹å¼ã€‚åœ¨æœ¬é—®é¢˜çš„æœ€åè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚

> ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š`è‡ªå®šä¹‰navBar`+`åŸç”ŸtabBar`
>
> <img src="./images/scroll-view-height.png" alt="image-20201220130812178" style="zoom:50%;" align="left"/>
>
> åœ¨çœ‹ä»£ç ä¹‹å‰ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`windowHeight`å’Œ`navBarHeight`éƒ½æ˜¯é€šè¿‡`wx.getSystemInfo`ç›´æ¥æˆ–é—´æ¥å¾—åˆ°ï¼Œå…¶å•ä½éƒ½æ˜¯`px`ï¼Œä½†æ˜¯ä¸€èˆ¬åœ¨ç®¡ç†å°ç¨‹åºçš„ç»„ä»¶çš„æ—¶å€™ï¼Œéƒ½ä¼šä½¿ç”¨`rpx`æ¥é€‚é…ä¸åŒçš„æ‰‹æœºï¼Œå› æ­¤åœ¨ä½¿ç”¨å˜é‡ç®¡ç†ç»„ä»¶ä¹‹å‰ï¼Œè¦æ˜ç¡®å“ªäº›å˜é‡æ˜¯`px`ï¼Œéœ€è¦é€šè¿‡è½¬åŒ–å˜æˆ`rpx`ã€‚å…¶ä¸­éœ€è¦`devicePixelRatio`ï¼Œè¿™ä¸ªå‚æ•°ä¹Ÿå¯ä»¥é€šè¿‡`wx.getSystemInfo`ç›´æ¥å¾—åˆ°ï¼Œä½†æ˜¯ä¸ºäº†å¾—åˆ°çš„å‚æ•°æ›´åŠ è´´è¿‘å®é™…(ç³»ç»Ÿè¿”å›çš„ä¼šå¯¹å¤šä½™çš„ä½æ•°è¿›è¡Œå–èˆæ“ä½œï¼Œå› æ­¤ä¼šä¸å¤Ÿç²¾ç¡®)ã€‚
>
> å¾®ä¿¡å°ç¨‹åºéƒ½é»˜è®¤è®¾ç½®`width = 750rpx`ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨`dpr = 750 / windowWidth`å¾—å‡ºã€‚`dpr`ç›´æ¥åœ¨é¡µé¢çš„`onLoad()`ä¸­å®ç°è·å–å³å¯ã€‚å¾—åˆ°dpråï¼Œå…·ä½“ä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„`rpx = px * dpr`ã€‚
>
> ç”±äºæ¶‰åŠåˆ°`wx.getSystemInfo()`ä»¥åŠ`app.globalData`çš„ä½¿ç”¨ï¼Œä»£ç åªè®°å½•å…·ä½“å˜é‡å¦‚ä½•ç®¡ç†å…ƒç´ ã€‚
>
> ç°åœ¨çœ‹ä»£ç ï¼š
>
> ```js
> // page.js
> Page({
>   data: {
>     // æœ€å¤–å±‚
>     windowDomHeight: '', //è¿™é‡Œæ˜¯é€šè¿‡ç³»ç»Ÿè¿”å›å‚æ•°ç›´æ¥è·å–ï¼Œå•ä½æ˜¯px
>     navBarHeight: '', //è¿™é‡Œæ˜¯é€šè¿‡ç³»ç»Ÿè¿”å›å‚æ•°é—´æ¥è·å–ï¼Œå•ä½æ˜¯px
>     // ç³»ç»Ÿè¿”å›æ˜¯px => éœ€è¦è½¬æ¢ rpx = px * dprWidth
>     userInfoHeight: '300', //è‡ªå·±ç®¡ç†ï¼Œå•ä½rpx
>     topTitleHeight: '50', //è‡ªå·±ç®¡ç†ï¼Œå•ä½rpx
> 
>     // ä¸€äº›å†…å±‚çš„ç»„ä»¶å‚æ•°ï¼Œéƒ½æ˜¯è‡ªå·±ç®¡ç†ï¼Œå•ä½rpx
>     // ç”¨æˆ·å¤´åƒçš„é•¿å®½
>     avatarHeight: '240', 
>     avatarPadding: '30', 
>     // ä¿è¯ç”¨æˆ·å¤´åƒå±…ä¸­
>     avatarPadding: '50',
>     // ç™»å½•æŒ‰é’®é«˜åº¦
>     loginButtonHeight: '300', 
>     
>     // dpr
>     dprWidth: '2', //éœ€è¦åœ¨onLoadåŠ è½½çš„æ—¶å€™é€šè¿‡è·å–ç³»ç»Ÿä¿¡æ¯è®¡ç®—å¾—å‡º
>   }
> })
> ```
>
> ```html
> <!-- 
> page.wxml
> <navbar>æ˜¯è‡ªå®šä¹‰ç»„ä»¶ï¼Œå…¶é«˜åº¦æ˜¯navBarHeight
> -->
> 
> <view>
>   <navbar page-name=""></navbar>
>   <view class="user-information-view" style="height: {{userInfoHeight}}rpx;">
>     <view class="user-avatar-view" style="padding: {{avatarPadding}}rpx; ">
>       <image class="user-avatar" src="{{avatarImage}}" style="height: {{avatarHeight}}rpx; width: {{avatarHeight}}rpx; ">
>       </image>
>     </view>
>     <view class="login-button-view" style="height: {{loginButtonHeight}}rpx;">
>       <button class="login-button" type="primary" open-type="getUserInfo" bindgetuserinfo="clickLoginButton">
>         ç™»å½•/æ³¨å†Œ</button>
>     </view>
>   </view>
>   <view class="award-content-view">
>     <view class="top-title-view" style="height: {{topTitleHeight}}rpx;">
>       <text class="top-title-text">æˆ‘è·å¾—çš„å¥–é¡¹</text>
>     </view>
>     <scroll-view class="award-scroll-view" scroll-y style="height: {{(windowDomHeight-navBarHeight) * dprWidth - userInfoHeight - topTitleHeight}}rpx;">
>       <view class="scroll-show-view" wx:for="{{imageList}}" wx:key="index">
>         <view class="award-title">
>           <text class="award-title-text">{{item.imageName}}</text>
>         </view>
>         <view class="award-image">
>           <image src="{{item.imageUrl}}"></image>
>         </view>
>       </view>
>     </scroll-view>
>   </view>
> </view>
> ```

â€‹	æœ€åéœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼Œè™½ç„¶éƒ½é‡‡ç”¨äº†å˜é‡èµ‹å€¼çš„æ–¹å¼ï¼Œè¿˜æ˜¯å¯ä»¥äº§ç”Ÿå±å¹•æ»‘åŠ¨çš„æ•ˆæœã€‚å³æŒ‰ç…§é€»è¾‘ä¸Šæ¥è¯´ï¼Œæ‰€æœ‰çš„å˜é‡æ€»å’Œ=å±å¹•æ€»é«˜åº¦ï¼Œä½†æ˜¯å®é™…æƒ…å†µæ˜¯æ‰€æœ‰ç»„ä»¶çš„é«˜åº¦ä¹‹å’Œ>å±å¹•æ€»é«˜åº¦ã€‚è¿™æ˜¯å› ä¸ºåœ¨èµ‹å€¼çš„æ—¶å€™ï¼Œå†…å®¹é«˜åº¦>èµ‹å€¼é«˜åº¦ï¼Œæ¯”å¦‚ï¼š

```js
// page.js
data: {
  viewHeight: 10,
}
```

```html
<!-- page.wxml -->
<view style="height: {{viewHeight}}rpx;">
  <text style="height: 20rpx"></text>
</view>
```

â€‹	å®é™…è®¡ç®—çš„æ—¶å€™åº”è¯¥`-20`ï¼Œä½†æ˜¯è®¡ç®—çš„æ—¶å€™ç”¨çš„æ˜¯`viewHeight: 10`ï¼Œå› æ­¤å°‘å‡äº†ï¼Œå¯¼è‡´ç»„ä»¶æ€»ä½“é«˜åº¦æ›´å¤§ã€‚å› æ­¤å˜é‡ç®¡ç†çš„æ—¶å€™è¦æ³¨æ„æ¯ä¸€ä¸ªç»„ä»¶ï¼ŒåŒ…æ‹¬å…¶å†…éƒ¨ç»„ä»¶ã€‚è¿˜æœ‰å°±æ˜¯`margin`å’Œ`padding`æœ‰æ—¶å€™ä¹Ÿä¼šäº§ç”Ÿå¥‡æ€ªçš„å½±å“ï¼Œ debugçš„æ—¶å€™å¦‚æœå®åœ¨æ‰¾ä¸å‡ºé—®é¢˜å¯ä»¥çœ‹çœ‹ç»„ä»¶ä¹‹é—´çš„`margin`å’Œ`padding`ã€‚

****

### 19. wx.requeståˆæ³•åŸŸåé…ç½®

[å¾®ä¿¡å°ç¨‹åºé…ç½®åˆæ³•åŸŸåå’Œä¸šåŠ¡åŸŸå](https://www.cnblogs.com/xubao/p/11982626.html)

åˆæ³•åŸŸåé…ç½®éœ€è¦åœ¨å¾®ä¿¡å°ç¨‹åºçš„å¼€å‘è€…å¹³å°ä¸­è¿›è¡Œé…ç½®ã€‚

`åˆæ³•åŸŸå`ï¼šé’ˆå¯¹`wx.request`ã€‚æ³¨æ„æœ€åä¸è¦å¸¦æ–œæ ï¼Œ`https://www.to2098.com:30799`ã€‚ä¸è¦å†™æˆ`https://www.to2098.com:30799/`ã€‚

`ä¸šåŠ¡åŸŸå`ï¼šé’ˆå¯¹è·³è½¬é¡µé¢

****

### 20. forå¾ªç¯æ˜¾ç¤ºç»„ä»¶ï¼Œè·å–å½“å‰ç‚¹å‡»å…ƒç´ çš„ä¸€äº›å‚æ•°&æ ·å¼ç®¡ç†

é—®é¢˜å‡ºç°æ˜¯å› ä¸ºï¼Œåœ¨`wx:for`å¯¹åˆ—è¡¨éå†è¿›è¡Œç”Ÿæˆå…ƒç´ çš„æ—¶å€™ï¼Œ1.å¸Œæœ›å¾—åˆ°åˆ—è¡¨ä¸­çš„å‚æ•°ï¼Œä»¥ä¾¿è¿›è¡Œè¿›ä¸€æ­¥æ“ä½œã€‚2.å¸Œæœ›å¯¹ä¸åŒç»„ä»¶è¿›è¡Œä¸åŒçš„æ ·å¼ç®¡ç†

é’ˆå¯¹1ã€‚è¿™æ—¶å€™éœ€è¦å¯¹åœ¨å…ƒç´ ä¸­è®¾ç½®`data-**="dataNeeded"`ï¼Œç„¶åå°±å¯ä»¥åœ¨`bindtap`ç»‘å®šçš„äº‹ä»¶ä¸­å¾—åˆ°è¿”å›å‚æ•°ã€‚æ¯”å¦‚ä¸‹é¢å›¾ä¸­çš„`e.currentTarget.dataset`é‡Œé¢å°±å­˜æ”¾ç€å·²ç»ä¼ è¿‡æ¥çš„`index`ã€‚

<img src="./images/data-set.png" alt="image-20201220214918590" style="zoom:100%;" align='left'/>

```html
<!-- 
ä½¿ç”¨data-indexï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°indexï¼Œ
ä½¿ç”¨data-whateverï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°whatever
-->
<view wx:for="{{awardsList}}" wx:key="index">
	<image src="{{item.gloryUrl}}" data-index="index" bindtap="gotoAwardDetail"></image>
</view>
```

```js
// page.js
bindtapFunction(e) {
  console.log(e);
}
```

é’ˆå¯¹2ã€‚å¯¹`class`è¿›è¡Œæ’å€¼å³å¯ã€‚

```html
<!-- page.wxml -->
<view wx:for="{{awardsList}}" wx:key="index">
	<image class="image-{{index}}" src="{{item.gloryUrl}}"></image>
</view>
```

```css
/* page.wxss */
.image-0 {
  width: 40rpx;
}

.image-1 {
  width: 50rpx;
}
```

****

### 21. å¸¦å‚æ•°è·³è½¬é¡µé¢

â€‹	éœ€æ±‚æ˜¯æœ‰äº›é¡µé¢çš„æ˜¾ç¤ºå†…å®¹éœ€è¦æ ¹æ®å˜é‡æ˜¾ç¤ºï¼Œæ¯”å¦‚ç‚¹å‡»äº†æŸä¸ªå›¾ç‰‡è·³è½¬è¿‡æ¥ä¹‹åï¼Œæ˜¾ç¤ºçš„æ˜¯è¿™ä¸ªå›¾ç‰‡ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠè¿™ä¸ªå›¾ç‰‡çš„urlåœ¨è·³è½¬çš„æ—¶å€™ä¼ è¿‡æ¥ã€‚

â€‹	ä¸€å¼€å§‹æƒ³å‡ºæ¥æ¯”è¾ƒè ¢çš„æ–¹æ³•æ˜¯åˆ©ç”¨æœ¬åœ°ç¼“å­˜ï¼Œç„¶ååœ¨è·³è½¬åçš„é¡µé¢ä½¿ç”¨æœ¬åœ°ç¼“å­˜è·å–ï¼Œå°±å¯ä»¥äº§ç”Ÿäº¤äº’ã€‚

> ```js
> // sendPage.js
> wx.setStorageSyn('urlSend', imageUrl);
> wx.navigateTo({
>   url: '/pages/getPage/getPage',
> })
> ```
>
> ```js
> // getPage.js
> var imageUrl = wx.getStorageSyn('urlSend') || null;
> ```

â€‹	ä½†æ˜¯ï¼šå…¶å®è·³è½¬é¡µé¢çš„æ—¶å€™æœ¬èº«æä¾›äº†ä¼ å€¼æ“ä½œï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚

> ```js
> // sendPage.js
> wx.navigateTo({
>   url: '/pages/getPage/getPage?urlSend=' + imageUrl + '&imageName=' + imageName,
> })
> ```
>
> ```js
> // getPage.js
> // TODO!
> // onLoadåªåŠ è½½ä¸€æ¬¡ï¼Œæ˜¯å¦è¦ä½¿ç”¨onShow?åç»­å†å›é¡¾è¿™ä¸ªé—®é¢˜
> data: {
>   imageUrl: '',
>   imageName: '',
> }
> onLoad(options) {
>   this.setData({
>     imageUrl: options.imageUrl,
>     imageName: options.imageName,
>   })
> }
> ```

****

### 22. å…³äºonLoad & onShowè°ƒç”¨é—®é¢˜

â€‹	æ ¹æ®æ–‡æ¡£ï¼Œ`onLoad`åªä¼šåŠ è½½ä¸€æ¬¡ï¼Œä¼šåœ¨é¡µé¢åŠ è½½çš„æ—¶å€™æ‰§è¡Œã€‚ä½†æ˜¯è¿™ä¸ª`åŠ è½½çš„æ—¶å€™`å…·ä½“æ˜¯æŒ‡ä»€ä¹ˆæ—¶å€™ï¼Ÿéœ€è¦æ¢ç©¶ä¸€ä¸‹ã€‚éœ€è¦å…·ä½“åŒºåˆ†`åˆå§‹é¡µé¢`å’Œ`éåˆå§‹é¡µé¢`ã€‚

> `åˆå§‹é¡µé¢`ï¼šåœ¨app.jsonä¸­æŒ‡å®šçš„é¦–é¡µï¼Œåªæœ‰åˆå§‹çš„é¡µé¢æ‰èƒ½æ‹¥æœ‰`tabBar`ï¼Œä¹Ÿæ‰èƒ½ä½¿ç”¨`wx.switchTab()`ï¼Œè¿™ä¸ªæ˜¯ä¸»è¦åŒºåˆ†ã€‚

| operation           | onLoad     | onShow     |
| ------------------- | ---------- | ---------- |
| ç¬¬ä¸€æ¬¡æ‰“å¼€é¡µé¢      | `onLoad()` | `onShow()` |
| `wx.navigateTo()`   | `onLoad()` | `onShow()` |
| `wx.navigateBack()` |            | `onShow()` |
| `wx.switchTab()`    |            | `onShow()` |
| `wx.redirectTo()`   | `onLoad()` | `onShow()` |
| `wx.reLaunch()`     | `onLoad()` | `onShow()` |
| `wx.previewImage()` |            | `onShow()` |

â€‹	è¿™é‡Œéœ€è¦æ³¨æ„ä¸¤å¯¹ï¼š`wx.navigateTo`+`wx.navigateBack`ï¼›`wx.navigateTo`å’Œ`wx.redirectTo`ã€‚

â€‹	`wx.navigateBack`ï¼šå¯ä»¥è¿”å›ä¸Šnå±‚é¡µé¢ï¼Œé¡µé¢æ ˆä¸º10ï¼›nå¯ä»¥é€šè¿‡`delta`æ¥è®¾å®šã€‚

â€‹	`wx.navigateTo`å’Œ`wx.redirectTo`éƒ½ä¼šåœ¨è·³è½¬é¡µé¢çš„æ—¶å€™æ‰§è¡Œç›®çš„é¡µé¢çš„`onLoad`å’Œ`onShow`å‡½æ•°ï¼Œä½†æ˜¯æœ‰æ‰€ä¸åŒï¼Œå³`wx.navigateTo`å¯ä»¥åœ¨è·³è½¬ä¹‹åé€šè¿‡`wx.navigateBack`è¿”å›ä¹‹å‰çš„é¡µé¢ï¼›ä½†æ˜¯ä½¿ç”¨`wx.redirectTo`å°±ä¸èƒ½æ‰§è¡Œè¿”å›é¡µé¢ã€‚å¯ä»¥é€šè¿‡å®˜æ–¹æ–‡æ¡£ä¸­ä½“ä¼šå·®åˆ«ï¼š

> `wx.navigateTo`ï¼šä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚ => é¡µé¢æ ˆä¸­æœ‰ç¼“å­˜ã€‚
>
> `wx.redirectTo`ï¼šå…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚ => é¡µé¢æ ˆä¸­æ— ç¼“å­˜ã€‚

â€‹	å¯ä»¥çœ‹åˆ°å…³é”®åœ¨äºï¼šä¿ç•™/å…³é—­ã€‚å†çœ‹`wx.switchTab()`ï¼š

> è·³è½¬åˆ° tabBar é¡µé¢ï¼Œå¹¶å…³é—­å…¶ä»–æ‰€æœ‰é tabBar é¡µé¢ã€‚

â€‹	å¯ä»¥çœ‹åˆ°ä½¿ç”¨`wx.switchTab()`ä¹Ÿä¼šå…³é—­å…¶ä»–çš„é¡µé¢ï¼Œå› æ­¤ä¹Ÿä¸èƒ½é€šè¿‡`delta`è¿”å›ä¸Šnå±‚ã€‚

â€‹	`wx.reLaunch()`ä¸€æ ·çš„é“ç†ï¼Œæè¿°ä¹Ÿæ˜¯å…³é—­ã€‚

> å…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚

****

### 23. æŒ‰éœ€å…³é—­Toast

â€‹	ä½¿ç”¨`wx.showToast()`æ—¶è®¾ç½®è¾ƒå¤§çš„`duration`ï¼Œåœ¨æƒ³è¦å…³é—­çš„æ—¶å€™ä½¿ç”¨`wx.hideToast()`ã€‚

```js
click() {
  wx.showToast({
    title: 'æ­£åœ¨è·å–',
		icon: 'loading',
		duration: 10000, //10s
  });
  wx.getImageInfo({
    src: imageUrl,
    success(e){
      wx.hideToast();
    }
  })
}
```

****

### 24. `canvas.fillText()`æ¢è¡Œå®ç°

ç›®å‰ä½¿ç”¨çš„æ˜¯é€šè¿‡`split('ï¼Œ')`åˆ†æˆå‡ éƒ¨åˆ†ï¼Œè¿™æ ·å°±å¿…é¡»ä¸¥æ ¼è§„å®šè¾“å…¥çš„å†…å®¹ã€‚æ¯”å¦‚å†…å®¹ä¸¥æ ¼è§„å®šåœ¨åªæœ‰ä¸€å¥ï¼Œå¹¶ä¸”åªå«æœ‰ä¸€ä¸ª`ï¼Œ`ã€‚

```js
data: {
  content: 'è¿™æ˜¯å‰åŠå¥å†…å®¹ï¼Œè¿™æ˜¯ååŠå¥å†…å®¹ã€‚'
}

createPostal() {
  contentList = this.data.content.split("ï¼Œ");
  canvas.setFontSize(60);
  canvas.fillText(contentList[0], x, y);
  canvas,fillText(contentList[1], x, y + 80;)
}
```

****

### 25. scroll-viewä¸‹æ‹‰åˆ·æ–°

ä¸‹æ‹‰åˆ·æ–°æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½¿ç”¨`refresher`ï¼Œä¸€ç§æ˜¯è§¦é¡¶ï¼ˆè§¦åº•åŒç†ï¼‰ã€‚

â€‹	1.refresherï¼šå®˜æ–¹æä¾›çš„ä¸‹æ‹‰åˆ·æ–°æ¥å£ã€‚å¦‚æœä¸æƒ³è¦ç”¨å®˜æ–¹çš„æ ·å¼çš„è¯ï¼Œå¯ä»¥è‡ªå®šä¹‰ã€‚

| å±æ€§                    | ä½œç”¨                                                         |
| ----------------------- | ------------------------------------------------------------ |
| refresher-enable        | è®¾ç½®ä¸º`{{true}}`å¯ä½¿ç”¨                                       |
| refresher-threshold     | ä¸‹æ‹‰åˆ·æ–°é˜ˆå€¼`default=45`                                     |
| refresher-default-style | æ ·å¼`black/white/none`                                       |
| refresher-background    | è‡ªå®šä¹‰èƒŒæ™¯é¢œè‰²                                               |
| refresher-triggered     | ä¸‹æ‹‰ä¹‹åä¼šå˜æˆ`true`ï¼Œå¦‚æœæƒ³è¦éšè—éœ€è¦æ‰‹åŠ¨ä¿®æ”¹æˆ`false`      |
| bindrefresherrefresh    | ä¸‹æ‹‰åˆ°è§¦å‘é˜ˆå€¼ååœæ­¢ä¸‹æ‹‰è§¦å‘çš„handleå‡½æ•° `='refreshFunction'` |
| bindrefresherpulling    | `ä¸‹æ‹‰`åŠ¨ä½œæŒç»­è§¦å‘ï¼Œåªè¦ä¿æŒä¸‹æ‹‰å°±ä¸€ç›´è§¦å‘                   |
| bindrefresherrestore    | æ¢å¤åˆ°åˆå§‹çŠ¶æ€è§¦å‘                                           |
| bindrefresherabort      | ä¸‹æ‹‰åŠ¨ä½œæ²¡æœ‰åˆ°é˜ˆå€¼å³åœæ­¢åŠ¨ä½œè§¦å‘                             |

```js
// page.js
Page({
  data: {
    refreshTrigger: false,
  },
  
  refreshUpper() {
    // do something
  },
  
})
```

```xml
<!-- page.wxml -->
<scroll-view
	scroll-y="{{true}}"
	refresher-enabled='{{true}}'
	refresher-threshold='45'
	refresher-default-style="white"
	refresher-triggered="{{refreshTrigger}}"
	bindrefresherrefresh="refreshUpper"
	style="height: 1000rpx;"
>
  <!-- å¦‚æœä¸æƒ³è¦ä½¿ç”¨å®˜æ–¹æ ·å¼ï¼šrefresher-default-style="none" -->
	<view slot="refresher"></view>
</scroll-view>
```

â€‹	2.è§¦é¡¶/è§¦åº•ï¼š

`bindscrolltoupper`ï¼šè§¦é¡¶(æ¨ªå‘åˆ™è§¦å·¦)ï¼Œé…åˆ`upper-threshold`ä½¿ç”¨ã€‚å¦‚æœæƒ³è¦äº§ç”Ÿ`fresher`çš„ä¸‹æ‹‰æ•ˆæœï¼Œå¯ä»¥è®¾ç½®`upper-threshold=-45`ã€‚

`bindscrolltolower`ï¼šè§¦åº•(æ¨ªå‘åˆ™è§¦å³)ï¼Œé…åˆ`lower-threshold`ä½¿ç”¨ã€‚å¦‚æœæƒ³è¦äº§ç”Ÿåƒ`fresher`ä¸€æ ·çš„æ•ˆæœï¼Œå¯ä»¥è®¾ç½®`lower-threshold=-45`ã€‚

- [ ]  swipper è½®æ’­ç»„ä»¶ï¼ˆç±»ä¼¼äºpreviewå‡ ä¸ªå›¾æ»‘æ¥æ»‘å»ï¼‰ï¼Œç±»ä¼¼scroll-viewä¸­çš„`paging-enable`å±æ€§ã€‚

****

### 26.ç”¨æˆ·æ‹’ç»æˆæƒåé‡æ–°ç‚¹å‡»å¼•å¯¼æˆæƒ

éœ€è¦ä½¿ç”¨buttonæ¥è§¦å‘`wx.openSetting`

```xml
<button open-type="openSetting">æ‰“å¼€æˆæƒé¡µé¢</button>
```

****

### 27.å¾®ä¿¡å°ç¨‹åºäºŒç»´ç å‚æ•°æµ‹è¯•

[getUnlimited ç”ŸæˆäºŒç»´ç ï¼Œé€šè¿‡å¼€å‘è€…å·¥å…·â€œé€šè¿‡äºŒç»´ç ç¼–è¯‘â€ è·å–ä¸åˆ°scene?](https://developers.weixin.qq.com/community/develop/doc/000cac14808c90bdc40a934f351800)

[å°ç¨‹åºè¸©è¿‡çš„ä¸€ä¸ªå°å‘---è§£æäºŒç»´ç decodeURIComponent() urlè§£ç ](https://www.cnblogs.com/fps2tao/p/10137465.html)

[æ‰«æ™®é€šé“¾æ¥äºŒç»´ç æ‰“å¼€å°ç¨‹åº](https://developers.weixin.qq.com/miniprogram/introduction/qrcode.html#åŠŸèƒ½ä»‹ç»)

[å¾®ä¿¡å°ç¨‹åºè·å–äºŒç»´ç æºå¸¦çš„å‚æ•°å†…å®¹/åœºæ™¯sceneå€¼](https://blog.csdn.net/qq_25102811/article/details/110198152)ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…·é»˜è®¤æ˜¯`æ™®é€šç¼–è¯‘`ï¼Œå¯ä»¥é€‰æ‹©`é€šè¿‡äºŒç»´ç ç¼–è¯‘`ï¼Œé€‰æ‹©å·²ç»ç”Ÿæˆçš„äºŒç»´ç ï¼Œå³å¯è°ƒè¯•äºŒç»´ç æµ‹è¯•æŸ¥çœ‹sceneå€¼å…·ä½“æƒ…å†µã€‚

****

### 28.buttonæ–‡æœ¬å±…ä¸­ã€buttonåµŒå…¥å›¾åƒå’ŒèƒŒæ™¯å›¾ç‰‡

[buttonæ–‡æœ¬å±…ä¸­](https://blog.csdn.net/weixin_40087279/article/details/81358364)ï¼šæ³¨æ„è®¾ç½®æ–‡æœ¬é«˜åº¦å’Œbuttoné«˜åº¦ä¸€è‡´

[CSSè®©èƒŒæ™¯å›¾ç‰‡å¡«æ»¡DIV](https://blog.csdn.net/qq_29656961/article/details/80158778)ï¼šå¾®ä¿¡å°ç¨‹åºä¸èƒ½å†wxssä¸­è¯»å–æœ¬åœ°å›¾ç‰‡ï¼Œå°±åœ¨wxmlä¸­ç®¡ç†ã€‚

â€‹	1.buttonæ–‡æœ¬å±…ä¸­éœ€è¦æ³¨æ„è®¾ç½®æ–‡æœ¬çš„é«˜åº¦`line-height`ä»¥åŠbuttonæœ¬èº«é«˜åº¦`height`ä¸€è‡´ã€‚

```css
.sample-button {
  height: 77rpx;
  line-height: 77rpx;
}
```

â€‹	2.buttonåµŒå…¥å›¾åƒï¼Œåœ¨`<button>...</button>`ä¸­é—´æ·»åŠ å³å¯ã€‚æ³¨æ„æ ·å¼ã€‚

```xml
<button class="save-to-album-button" bindtap="saveToAlbum">
	<view bindtap="saveToAlbum">
		<image src="/images/save-icon.png" style="width: 60rpx; height: 62rpx;"></image>
	</view>
	<view bindtap="saveToAlbum">
		<text style="font-size:37rpx; align-items: center">ä¿å­˜åˆ°ç›¸å†Œ</text>
	</view>
</button>
```

```css
.save-to-album-button {
  display: flex;
  flex-direction: row;
  justify-content: center;
  background: #C30F23;
}
```

â€‹	3. å¾®ä¿¡å°ç¨‹åºbuttonèƒŒæ™¯å›¾ç‰‡éœ€è¦åœ¨wxmlä¸­ç®¡ç†ã€‚

> ```html
> <button style="background: #F16969;" url(/images/button-background.png) no-repeat;>
>   å®Œæˆ
> </button>
> ```



****

### 29.Flexå¸ƒå±€`justify-content`å’Œ`align-items`åŒºåˆ«

<img src="./images/justify-content&align-items.png" alt="image-20210107125511489" style="zoom:50%;" />

****

### 30.`wx.for`ä¸­å®ç°å¾ªç¯ä¸­`<image>`å‡ å¼ å›¾ç‰‡è¦†ç›–

<img src="./images/imageæ ‡ç­¾forå¾ªç¯è¦†ç›–.png" alt="image-20210107152015049" style="zoom:50%;" align="left"/>

å¦‚ä¸Šå›¾ï¼Œæ˜¯ä¸‰å¼ å›¾ç‰‡çš„è¦†ç›–ï¼šé‡‘è‰²å¤–æ¡†ï¼ˆä¸­ç©ºï¼‰ã€ç™½è‰²å¥–çŠ¶å†…å®¹ã€lock-iconã€‚

> é‡‘è‰²è¾¹æ¡†çš„margin-topä½ç§»æƒ…å†µæ ¹æ®ä¸­ç©ºè°ƒæ•´ï¼›
>
> lock-icon.pngåˆ™è¦æ ¹æ®é‡‘è‰²è¾¹æ¡†çš„é«˜åº¦è¿›è¡Œè°ƒæ•´ï¼ˆ500rpx)ã€‚

```html
<view class="award-image-view">
	<image class="award-image-0" src="{{item.gloryUrl}}" data-item="{{item}}"
        style="filter: blur(3px);" bindtap="gotoAwardDetail"></image>
	<view style="margin-top: -470rpx; z-index:99;" >
		<image src="/images/award-border.png" style="width: 686rpx; height: 500rpx;"></image>  
	</view>
	<view style="margin-top: -500rpx; z-index: 999;">
		<image src="/images/lock-icon.png" style="width: 686rpx;"></image>  
	</view>
</view>
```

```css
/* è¿™é‡Œä¸»è¦æ˜¯æŠŠç…§ç‰‡å±…ä¸­ */
.award-image-view {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  margin-top: 20rpx;
}

.award-image-0 {
  width: 650rpx;
  height: 460rpx;
}
```

1. åˆ©ç”¨`margin-top = -470rpx`è¾¾åˆ°ç…§ç‰‡é‡å çš„ä½œç”¨ã€‚è¿™é‡Œè¦æ³¨æ„ï¼šæœ€åçš„ç…§ç‰‡(å³`lock-icon.png`)å†³å®šäº†ä¸‹ä¸€ä¸ªå…ƒç´ å°†ä»å“ªé‡Œå¼€å§‹è®¡ç®—ã€‚forå¾ªç¯äº§ç”Ÿçš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„`top`å°†æŒ‰ç…§`lock-icon.png`æ‰€åœ¨çš„`view`çš„åº•éƒ¨å¼€å§‹ç®—ã€‚å› æ­¤è¦ä¿è¯`lock-icon`çš„å›¾ç‰‡å¤§å°è¦†ç›–äº†æ•´ä¸ªçˆ¶çº§viewã€‚æœ€å¥½ä¿è¯æ‰€æœ‰çš„è¦†ç›–ç…§ç‰‡çš„å¤§å°ä¸€è‡´ã€‚
2. æ¨¡ç³Šæ•ˆæœçš„`z-index`è¾ƒé«˜ï¼Œå› æ­¤å¦‚æœä¸æƒ³ç™½è‰²å¥–çŠ¶è¢«é‡‘è‰²è¾¹æ¡†çš„éƒ¨åˆ†æ˜¾éœ²å‡ºæ¥ï¼Œå°±è¦ç”¨`z-index`ç®¡ç†å¥½ä¸‰å¼ ç…§ç‰‡çš„å±‚çº§ã€‚

â€‹	å¯¹äºç¬¬1ç‚¹çš„è§£é‡Šï¼Œå‡å¦‚æœ€åæ”¾ç½®`lock-icon.png`å¤§å°è¾ƒå°çš„æƒ…å†µè¿›è¡Œåˆ†æï¼š

<img src="./images/multi-images.png" alt="image-20210107172336381" style="zoom:50%;" />

> æ³¨æ„ä¸Šå›¾`lock-icon.png`æ‰€åœ¨çš„`<view>`ä½œä¸ºæœ€åä¸€ä¸ªï¼Œå®ƒçš„`bottom`å°±æ˜¯ä¸‹ä¸€ä¸ªå…ƒç´ çš„`top`ï¼Œå› æ­¤ä¼šå½±å“ä¸‹ä¸€ä¸ªviewçš„`top`ã€‚å¦‚æœæƒ³è¦ä¸‹ä¸€ä¸ªviewçš„æ ·å¼æ­£å¸¸ï¼Œé‚£ä¹ˆå°±è¦æ³¨æ„ç…§ç‰‡çš„é«˜åº¦ã€‚å› æ­¤æœ€å¥½ä½¿å¾—æ‰€æœ‰çš„ç…§ç‰‡çš„å¤§å°ä¸€è‡´ã€‚

â€‹	è¿™æ˜¯ç†è®ºä¸Šæ²¡æœ‰å‡ºç°é—®é¢˜çš„æƒ…å†µï¼Œå®é™…ä¸ŠæŠŠ`<image>`æ”¾åœ¨`<view>`é‡Œçš„æ—¶å€™ï¼Œä¼šå‡ºç°å®¹å™¨å†…éƒ¨é—´éš™ï¼š

<img src="./images/image-view-slot.png" alt="image-20210108230131718" style="zoom:50%;" align="left"/>

â€‹	å¦‚ä¸Šå·¦å›¾ï¼š`image`å¹¶æ²¡æœ‰å®Œå…¨å¡«å……æ•´ä¸ª`view`ï¼Œé‚£ä¹ˆä½¿ç”¨`margin-top: minus rpx;`çš„æ—¶å€™å°±ä¼šäº§ç”Ÿä¸ç²¾ç¡®çš„è¦†ç›–ï¼Œè¿™ä¸ªé—®é¢˜å‚è€ƒï¼š[å°ç¨‹åº imageè·Ÿviewæ ‡ç­¾ä¸Šä¸‹ä¼šæœ‰é—´éš™](https://www.jianshu.com/p/dc590c9b2695)ã€‚åœ¨`image`ä¸­è®¾ç½®`display: block` æˆ–è€…`vertical-align: bottom`å³å¯ã€‚æŠ‘æˆ–è€…åœ¨`view`ä¸­è®¾ç½® `font-size: 0`ã€‚

> åŸå› ï¼šå›¾ç‰‡æ–‡å­—ç­‰inlineå…ƒç´ é»˜è®¸æ˜¯è·Ÿçˆ¶çº§å…ƒç´ çš„baselineå¯¹é½ï¼Œè€Œbaselineåˆå’Œçˆ¶çº§åº•è¾¹æœ‰å¿…å®šé—´è·

```css
/* wxss */
.image {
  display: block;
}

.image {
  vertical-align: bottom;
}

.view {
  font-size: 0;
}
```

****

### 31.å¾®ä¿¡å°ç¨‹åºçš„åŠ¨æ€ç»‘å®šclass

```js
// page.js
Page({
  data: {
    dynamicClass: ['', 'class-1', 'class-2'],
  }
})
```

```xml
<!-- page.wxml, typeåœ¨wx:forä¸­æŒ‰éœ€é€‰æ‹©å‚æ•°å³å¯ï¼Œä¸º0æ—¶æ•°ç»„å…ƒç´ ''åˆ™æ²¡æœ‰è®¾å®šæ ·å¼-->
<button class="{{dynamicClass[type]}}"></button>
```

```css
/* page.wcss */
.class-1 {
  filter: blur(3px);
}

.class-2 {
  filter: blur(100px);
}
```

****

### éœ€è¦åšçš„

- [ ] æ³¨å†Œï¼šå¦‚æœæ²¡æœ‰çš„è¯éœ€è¦åœ¨æ•°æ®åº“æ·»åŠ 
- [ ] ç”¨æˆ·å­—è¡¨è¿˜è¦åŠ ä¸€ä¸ªâ€œç”¨æˆ·æƒé™å­—æ®µâ€
- [ ] é®ç½©ä¸­é—´çš„å†…å®¹å¯ä»¥ä½¿ç”¨å˜é‡ç®¡ç†æ ·å¼ï¼Œç„¶åå°±å¯ä»¥æŠŠå³ä¸Šè§’çš„å¾½ç« è´´ä¸Šå»äº†
- [ ] ä½¿ç”¨scroll-viewæ¥ç®¡ç†detailçš„æ–‡å­—å†…å®¹
- [ ] é¦–é¡µçš„å±•ç¤ºåº”è¯¥æ˜¯ä¸èƒ½è°éƒ½èƒ½çœ‹åˆ°ï¼Œæ ¹æ®ç™»å½•æƒ…å†µ/è®¿é—®æƒé™â€ç©ºå±•ç¤ºâ€œ
- [ ] æ·»åŠ åç«¯çš„affiliateã€yearå­—æ®µæ•°æ®åº“ï¼

- [ ] åé¢æ·»åŠ ä¸€ä¸ªæ–‡æ¡£ç®¡ç†æ•´ä¸ªé¡¹ç›®çš„æ‰€æœ‰ä¸œè¥¿ã€‚æ¯”å¦‚appIdã€secretdç­‰ã€‚åŒ…æ‹¬æ‰€æœ‰çš„æ¥å£ç­‰ã€‚
- [ ] [accessTokenå¤±æ•ˆé—®é¢˜](https://developers.weixin.qq.com/community/develop/doc/0002a878d5ca185ebd6a0421351400?_at=1558898084068)
- [x] detailèƒŒæ™¯å›¾ç°åœ¨æ˜¯å›ºå®šé«˜åº¦ï¼Œä¸å¯¹ã€‚ [1333, 1311]ï¼šå·®åˆ«ä¸å¤§ç°åœ¨æ‡’å¾—ä¿®æ”¹ã€‚
- [x] base64ä¿®æ”¹äº† äºŒç»´ç é‡æ–°æ£è…¾
- [x] åå°è¿”å›çš„dataå†³å®šdropdownå†…å®¹
- [x] æŒ‰éœ€åˆ¤æ–­æ˜¯å¦é‡‡ç”¨class

[è‡ªå®šä¹‰ä¸€ä¸ªmodal](https://blog.csdn.net/qq_43641373/article/details/107812436)

[ä¸€æ–‡å½»åº•å¼„æ‡‚wx.chooseImage](https://blog.csdn.net/weixin_34194379/article/details/91439079)

[net::ERR_PROXY_CONNECTION_FAILED](https://blog.csdn.net/zhao_gao/article/details/53485313)

[position fixed absolute](https://blog.csdn.net/xiaoxinshuaiga/article/details/83274915)

å‘¨ä¸€ä¸‹åˆ 89èŠ‚

å‘¨äº”ä¸‹åˆ 67èŠ‚ 





ç›®å‰å·¥ä½œè¿›å±•ï¼š

- [ ] 1.åˆ†äº«å›¾ç‰‡æ–‡å­—æ•°æ®è¿›è¡Œå›ºå®šï¼ˆæ¢æ³½èƒœå’Œè®¾è®¡ï¼ŒåŸæœ‰åŸºç¡€ä¸Šå›ºå®šæ–‡å­—10ï½20ä¸ªå­—ï¼‰
- [x] 2.ç­›é€‰æ•°æ®ä¸ºç©ºæ˜¾ç¤ºæç¤ºé¡µé¢ï¼ˆæ¢æ³½èƒœå’Œè®¾è®¡ï¼Œè®¾è®¡å·²å®Œæˆï¼ŒåŠŸèƒ½å·²å®ŒæˆğŸ®ï¼‰
- [ ] 3.åå°å¢åŠ ç»„ç»‡æ¶æ„è¡¨ï¼Œé‡Œé¢åŒ…æ‹¬å…¬å¸å’Œéƒ¨é—¨æ•°æ®ï¼ˆå´æ™¨å’Œå­™ç§‹æˆï¼Œè¿›è¡Œä¸­ï¼‰
- [x] 4.å‰å°éœ€è¦ä»åå°è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼ˆæ¢æ³½èƒœå’Œå´æ™¨ï¼Œå®ŒæˆğŸ®ï¼‰
- [x] 5.ä¿å­˜å›¾ç‰‡åŠ ç­‰å¾…å›¾æ ‡ï¼Œä¿å­˜å®Œåå‡ºç°ä¿å­˜åˆ†äº«çš„ç”¨æˆ·æç¤ºï¼ˆæ¢æ³½èƒœï¼ŒåŠŸèƒ½å·²å®ŒæˆğŸ®ï¼‰
- [x] 6.æ‰€æœ‰åˆ—è¡¨æ·»åŠ ç¿»é¡µåŠŸèƒ½ï¼ˆè´¾æµ©è‹’å’Œå­™ç§‹æˆï¼ŒåŠŸèƒ½å·²å®ŒæˆğŸ®ï¼‰
- [x] 7.é¦–é¡µå¹´ä»½ç­‰é€‰æ‹©æ¡†æ¡†æ”¾å¤§ï¼Œæœ‰åˆ©äºç”¨æˆ·é€‰æ‹©ï¼ˆè´¾æµ©è‹’ï¼Œå·²å®ŒæˆğŸ®ï¼‰
- [x] 8.è¿”å›é¦–é¡µçš„æŒ‰é’®æ”¾å¤§ï¼ˆè´¾æµ©è‹’ï¼Œå·²å®ŒæˆğŸ®ï¼‰
- [x] 9.å®Œæˆåˆ†äº«ç»™å¥½å‹åŠŸèƒ½çš„å¼€å‘ï¼ˆè´¾æµ©è‹’ã€æå²³é˜³ï¼Œå·²å®ŒæˆğŸ®ï¼‰
- [ ] 10.åŒºå—é“¾è®¤è¯åŠŸèƒ½è·Ÿå­˜è¯ç³»ç»Ÿæ‰“é€šï¼ˆæå²³é˜³å’Œå­™ç§‹æˆï¼Œå¼€å‘ä¸­ï¼‰
- [x] 11.æ™ºèƒ½åˆçº¦åŠ å…¥å¯¹jsonæ ¼å¼çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼ˆå­™ç§‹æˆï¼Œå·²å®ŒæˆğŸ®ï¼‰
- [ ] 12.ç®¡ç†åå°çš„ç”¨æˆ·ç®¡ç†ã€è£èª‰ç®¡ç†ã€ç»„ç»‡æ¶æ„ç®¡ç†ï¼Œæƒé™ç®¡ç†ç­‰åŠŸèƒ½å¼€å‘ï¼ˆå´æ™¨ï¼ŒæœªçŸ¥ï¼‰
- [x] 13.åˆæœŸçš„æµ‹è¯•æ•°æ®å¯¼å…¥ï¼ˆå­™ç§‹æˆï¼Œå·²å®ŒæˆğŸ®ï¼‰
- [x] 14.å† å†›æ¡£æ¡ˆå°ç¨‹åºä¸Šçº¿ï¼ˆæ¢æ³½èƒœï¼Œå·²å®Œæˆå¾®ä¿¡ä¸­å¯ä»¥æœç´¢ï¼Œç›®å‰æ­£åœ¨è¿­ä»£ï¼‰
- [ ] 15.å¯¹å°ç¨‹åºè¿›è¡Œå›¾ç‰‡çš„ç½‘ç»œcdnåŠ é€Ÿé…ç½®ï¼ˆæŠ€æœ¯ï¼Œæœªå®Œæˆï¼‰
- [x] 16.é…åˆæµ‹è¯•è¿›è¡Œæ•°æ®è°ƒæ•´ï¼ˆå­™ç§‹æˆï¼Œå·²å®ŒæˆğŸ®ï¼‰
- [x] 17.é…åˆæ•´ç†æœåŠ¡å™¨éƒ¨ç½²ä¿¡æ¯ï¼ˆå­™ç§‹æˆï¼Œå·²å®ŒæˆğŸ®ï¼‰

- [x] 18.è°ƒç ”å¾®ä¿¡åé¦ˆä¸æŠ•è¯‰é¡µé¢æ˜¯å¦å¯ä»¥åœ¨å°ç¨‹åºé‡Œè¿›è¡Œè°ƒç”¨ï¼ˆæ¢æ³½èƒœï¼Œå®ŒæˆğŸ®ï¼‰
- [x] 19.å¯¼èˆªæ å¢åŠ â€œåé¦ˆâ€é€‰é¡¹ï¼Œç›´æ¥å¯ä»¥è·³è½¬åˆ°å¾®ä¿¡çš„é‡Œåé¦ˆä¸æŠ•è¯‰é¡µé¢ï¼ˆæ¢æ³½èƒœï¼Œå®ŒæˆğŸ®ï¼‰
- [ ] 20.å‰ç«¯æŒ‰éœ€æ¨¡ç³Šç…§ç‰‡ï¼Œä¸å¯ç‚¹å‡»è·³è½¬ï¼ˆæ¢æ³½èƒœã€å´æ™¨ï¼Œæµ‹è¯•ä¸­ï¼‰



